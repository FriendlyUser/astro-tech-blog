<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrapping sec filings with python and secedgar - Astro Tech Blog</title>
    <meta name="description" content="sec filings with python and secedgar">
    <meta name="author" content="David Li">

    <link rel="alternate" type="application/rss+xml" href="/rss.xml">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">

    </script>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6">

    </script>
    
    <script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch(err) {
          // do nothing here
        }
      }
    </script>
  <link rel="stylesheet" href="/_astro/index.e6d5c001.css" />
<link rel="stylesheet" href="/_astro/index.be9bd85e.css" /><script type="module" src="/_astro/hoisted.b1b88089.js"></script></head>
  <body class="bg-slate-900 text-gray-100">
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div>
    <div data-pagefind-body>
      
  <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Scrapping sec filings with python and secedgar</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Friday, 7 April 2023 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/sec" style="padding-right:3px"> <category>sec<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-green-400 text-green-900"> <a href="/tags/python" style="padding-right:3px"> <category>python<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/secedgar" style="padding-right:3px"> <category>secedgar<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-w-3 aspect-h-2"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2022/dall-e/DALL·E 2022-12-10 21.55.07 - magnifying glass on stonks.png" alt="rbc stock analyzer" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content>
    <p>The Securities and Exchange Commission (SEC) is a U.S. government agency that is responsible for regulating the securities industry, including the stock and bond markets. It was created in 1934 in response to the stock market crash of 1929 and the subsequent Great Depression. The SEC’s main functions are to protect investors, maintain fair and orderly functioning of the markets, and facilitate capital formation. It does this by enforcing federal securities laws, regulating the securities industry, and providing transparency and disclosure to the markets. The SEC also oversees the registration and reporting of public companies, mutual funds, and other investment products, and it reviews and approves new financial products and trading strategies.</p>
<p>SEC filings are documents that publicly traded companies are required to file with the Securities and Exchange Commission (SEC). These documents provide information about a company’s financial performance, business operations, and ownership structure. They are intended to provide transparency and disclosure to investors, analysts, and the general public.</p>
<p>There are several types of SEC filings, including:</p>
<ol>
<li>Annual reports: Companies must file an annual report, also known as a Form 10-K, with the SEC each year. This report provides a detailed overview of the company’s financial performance and business operations over the past year. It includes financial statements, a discussion of the company’s business and financial condition, and other information about the company’s management, compensation, and risks.</li>
<li>Quarterly reports: Companies must also file quarterly reports, known as Form 10-Q, with the SEC each quarter. These reports provide financial information for the quarter, including financial statements and a discussion of the company’s business and financial condition.</li>
<li>Registration statements: Companies that are issuing securities, such as stocks or bonds, must file a registration statement with the SEC. This statement provides information about the company, the securities being offered, and the underwriters involved in the offering.</li>
<li>Proxy statements: Companies that are holding shareholder meetings must file a proxy statement with the SEC. This statement provides information about the meeting, including the matters to be voted on, the nominees for the board of directors, and executive compensation.</li>
<li>Other reports: There are many other types of reports that companies may be required to file with the SEC, depending on their circumstances. For example, companies with large insider ownership or significant changes in their financial condition may be required to file additional reports.</li>
</ol>
<p>SEC filings are available to the public on the SEC’s website, EDGAR (Electronic Data Gathering, Analysis, and Retrieval system).</p>
<p>To download filings from the SEC, you can use the secedgar package. It is a Python package that provides a simple interface to download filings from the SEC EDGAR database. It is built on top of the <code>requests</code> package, <code>beautifulsoup4</code> package and uses the EDGAR search API to download filings.</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">from</span><span style="color: #F8F8F2"> secedgar </span><span style="color: #F92672">import</span><span style="color: #F8F8F2"> filings, FilingType, QuarterlyFilings</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> argparse</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> time</span></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">time_it</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">func</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">wrapper</span><span style="color: #F8F8F2">(</span><span style="color: #F92672">*</span><span style="color: #FD971F; font-style: italic">args</span><span style="color: #F8F8F2">, </span><span style="color: #F92672">**</span><span style="color: #FD971F; font-style: italic">kwargs</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">        start </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> time.time()</span></span>
<span class="line"><span style="color: #F8F8F2">        result </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> func(</span><span style="color: #F92672">*</span><span style="color: #F8F8F2">args, </span><span style="color: #F92672">**</span><span style="color: #F8F8F2">kwargs)</span></span>
<span class="line"><span style="color: #F8F8F2">        end </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> time.time()</span></span>
<span class="line"><span style="color: #F8F8F2">        elapsed </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> end </span><span style="color: #F92672">-</span><span style="color: #F8F8F2"> start</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF">print</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF; font-style: italic">f</span><span style="color: #E6DB74">"Elapsed time: </span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">elapsed</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74"> seconds for </span><span style="color: #AE81FF">{</span><span style="color: #F8F8F2">func.__name__</span><span style="color: #AE81FF">}</span><span style="color: #E6DB74">"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> result</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">with</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">open</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"holdings_list.txt"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"r"</span><span style="color: #F8F8F2">) </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> f:</span></span>
<span class="line"><span style="color: #F8F8F2">    holdings_list </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> f.read().splitlines()</span></span>
<span class="line"><span style="color: #F8F8F2">company_list </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> []</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">get_13F</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">filing_entry</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"13F"</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> filing_entry.form_type: </span><span style="color: #88846F">#</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #88846F"># and filing_entry.company_name.lower() in (name.lower() for name in holdings_list):</span></span>
<span class="line"><span style="color: #F8F8F2">        company_list.append(filing_entry.company_name)</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">True</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">False</span></span>
<span class="line"><span style="color: #F8F8F2">    </span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">get_company_ab_10k</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">filing_entry</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"13F"</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> filing_entry.form_type </span><span style="color: #F92672">and</span><span style="color: #F8F8F2"> filing_entry.company_name.lower() </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> (name.lower() </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> name </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> holdings_list):</span></span>
<span class="line"><span style="color: #F8F8F2">        company_list.append(filing_entry.company_name)</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">True</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A6E22E">@time_it</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetch_filings</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">data</span><span style="color: #F8F8F2">: </span><span style="color: #66D9EF; font-style: italic">dict</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># 13F filings for Apple (ticker "aapl")</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># read list from holdings_list.txt</span></span>
<span class="line"><span style="color: #F8F8F2">    year, month, useragent, rate_limit </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> data[</span><span style="color: #E6DB74">"year"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"month"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"useragent"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"rate_limit"</span><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2">    quarterly </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> QuarterlyFilings(year, month, </span><span style="color: #FD971F; font-style: italic">user_agent</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">useragent, </span><span style="color: #FD971F; font-style: italic">entry_filter</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">get_13F, </span><span style="color: #FD971F; font-style: italic">rate_limit</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">rate_limit)</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># map folder to year and quarter</span></span>
<span class="line"><span style="color: #F8F8F2">    quarterly.save(</span><span style="color: #E6DB74">"filings"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A6E22E">@time_it</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">get_list</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">data</span><span style="color: #F8F8F2">: </span><span style="color: #66D9EF; font-style: italic">dict</span><span style="color: #F8F8F2">):</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #E6DB74">""" Get list of companies from 13F filings</span></span>
<span class="line"><span style="color: #E6DB74">    """</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># get year, month , useragent, rate_limit from data</span></span>
<span class="line"><span style="color: #F8F8F2">    year, month, useragent, rate_limit </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> data[</span><span style="color: #E6DB74">"year"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"month"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"useragent"</span><span style="color: #F8F8F2">], data[</span><span style="color: #E6DB74">"rate_limit"</span><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2">    quarterly </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> QuarterlyFilings(year, month, </span><span style="color: #FD971F; font-style: italic">user_agent</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">useragent, </span><span style="color: #FD971F; font-style: italic">entry_filter</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">get_13F, </span><span style="color: #FD971F; font-style: italic">rate_limit</span><span style="color: #F92672">=</span><span style="color: #F8F8F2">rate_limit)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    verbose </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> data[</span><span style="color: #E6DB74">"verbose"</span><span style="color: #F8F8F2">]</span></span>
<span class="line"><span style="color: #F8F8F2">    test_file </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> quarterly.get_filings_dict()</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> verbose:</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF">print</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"Getting list of companies from 13F filings"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF">print</span><span style="color: #F8F8F2">(test_file)</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># remove duplicates in company_list</span></span>
<span class="line"><span style="color: #F8F8F2">    all_company_list </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">list</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF; font-style: italic">dict</span><span style="color: #F8F8F2">.fromkeys(company_list))</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># save company_list to file</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">with</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">open</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"companies_list.txt"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"w"</span><span style="color: #F8F8F2">) </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> f:</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> company </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> all_company_list:</span></span>
<span class="line"><span style="color: #F8F8F2">            f.write(company </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"</span><span style="color: #AE81FF">\n</span><span style="color: #E6DB74">"</span><span style="color: #F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">def</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">main</span><span style="color: #F8F8F2">():</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">if</span><span style="color: #F8F8F2"> __name__ </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'__main__'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># cli parsing with argparse</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># two modes of operation: get_list and download_companies</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    parser </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> argparse.ArgumentParser(</span><span style="color: #FD971F; font-style: italic">description</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'Get list of companies from 13F filings'</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--mode'</span><span style="color: #F8F8F2">,</span><span style="color: #E6DB74">"-m"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">str</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'get_list or download_companies'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"get_list"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">required</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--year'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"-y"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">int</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'year of 13F filings'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #AE81FF">2022</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">required</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--quarter'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"-q"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">int</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'quarter of 13F filings'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">required</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--user_agent'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"-ua"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">str</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'user agent for secedgar'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"Your name &#x3C;dlcoding20@gmail.com>"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">required</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--rate_limit'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"-rl"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">int</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'rate limit for secedgar'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #AE81FF">5</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">required</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    parser.add_argument(</span><span style="color: #E6DB74">'--verbose'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"-v"</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">type</span><span style="color: #F92672">=</span><span style="color: #66D9EF; font-style: italic">bool</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">help</span><span style="color: #F92672">=</span><span style="color: #E6DB74">'verbose mode'</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">default</span><span style="color: #F92672">=</span><span style="color: #AE81FF">False</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">    args </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> parser.parse_args()</span></span>
<span class="line"><span style="color: #F8F8F2">    data </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #E6DB74">"year"</span><span style="color: #F8F8F2">: args.year,</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #E6DB74">"month"</span><span style="color: #F8F8F2">: args.quarter,</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #E6DB74">"useragent"</span><span style="color: #F8F8F2">: args.user_agent,</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #E6DB74">"rate_limit"</span><span style="color: #F8F8F2">: args.rate_limit,</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #E6DB74">"verbose"</span><span style="color: #F8F8F2">: args.verbose</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> args.mode </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"get_list"</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">        get_list(data)</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">elif</span><span style="color: #F8F8F2"> args.mode </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"download_companies"</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">pass</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F"># main()</span></span></code></pre>
<p>The fetch_filings function is used to download 13F filing documents from the SEC Edgar website using the secedgar library. It takes a dictionary called data as an argument and extracts the values for the year, month, user agent, and rate limit. It then creates an instance of the QuarterlyFilings class with the specified year, month, user agent, and rate limit, and sets the entry_filter parameter to the get_13F function. The entry_filter parameter allows you to specify a function that will be applied to each filing entry in the list of quarterly filings. If the function returns True for a particular filing entry, the filing will be included in the list of results.</p>
<p>The get_13F function checks whether a filing entry’s form type is “13F” and, if it is, appends the company name to the company_list global variable and returns True. This means that the fetch_filings function will only download 13F filings for companies that have their name included in the holdings_list file. The fetch_filings function then saves the resulting list of quarterly filings to the “filings” folder.</p>
<p>The get_list function is used to generate a list of companies that have 13F filings available for a given year and month. It works in a similar way to the fetch_filings function, but instead of downloading the actual filing documents, it uses the get_13F function to append the company names of the filing entries to the company_list global variable. The get_list function then removes duplicates from the company_list and saves the resulting list of unique company names to a file called “companies_list.txt”.</p>
<p>The main function is currently empty and does not do anything. The if <strong>name</strong> == ’<strong>main</strong>’: block at the end of the script handles command line input with the argparse library. It allows you to specify the mode of operation (either “get_list” or “download_companies”), the year and month of the 13F filings you want to retrieve, the user agent string to use when making requests to the SEC Edgar website, the rate limit for the requests, and whether you want to run the script in verbose mode. It then passes these values to the data dictionary and calls the appropriate function (get_list or fetch_filings) with the data dictionary as an argument.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/dli-invest/13F-sec">https://github.com/dli-invest/13F-sec</a></li>
</ul>
    </content></div></div></div></div>

  <div class="mx-auto max-w-screen-lg px-3 py-6">
  <div class="no-print flex w-full">
    <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form>
    <div class="ml-3 max-w-lg bg-slate-300">
      <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
      <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
      <div id="search" class="ml-3 p-4"></div>
      
    </div>
  </div>
</div>

    </div>
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2023<!-- --> by <!-- -->Astro Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2023-05-19<!-- -->.</div></div></div>
  </body></html>