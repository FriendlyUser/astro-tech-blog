<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>How I applied nlp to various youtube videos - FriendlyUsers Tech Blog</title><meta name="description" content="Applying nlp"><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="module">(function(e,n,r,t,m){e[t]=e[t]||[],e[t].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s="";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-K8P5P8FQ");</script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","UA-119155027-6");</script><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.BvkiO192.css">
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts" target="_self">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog" target="_self">GitHub</a></li></ul></nav></div></div> <div data-pagefind-body>  <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">How I applied nlp to various youtube videos</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Tuesday, 23 August 2022 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/youtube" style="padding-right:3px"> <category>youtube<!-- --> </category></a></span></div>Â <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/nlp" style="padding-right:3px"> <category>nlp<!-- --> </category></a></span></div>Â <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-green-400 text-green-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/python" style="padding-right:3px"> <category>python<!-- --> </category></a></span></div>Â <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-red-400 text-red-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/astro" style="padding-right:3px"> <category>astro<!-- --> </category></a></span></div>Â </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2022/dall-e/white_fur_monster_reading_book.png" alt="white fur monster" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content> <h1 id="applying-nlp-to-youtube-videos">Applying nlp to youtube videos</h1>
<p>Initially I was going to extract the transcripts from youtube videos directly using assemblyai, however google is super advanced and started to provide transcripts automatically.</p>
<p><a href="https://assemblyai.com/">assemblyai</a> is a great tool for extracting transcripts from videos, I have used it for investor presentations from other sources.</p>
<p>The legacy project (<a href="https://github.com/dli-invest/ytube_nlp">ytube_nlp</a>) I had before, was using jinja2 in order to generate the transcript pages, didnt have a toc or group videos by category. In addition, there is no rss feed in the ytube_nlp, so I have no way of knowing when new videos are out.</p>
<p>My latest iteration, <a href="https://github.com/dli-invest/media_nlp">media_nlp</a> is designed to take any sort of media (mainly youtube videos) and extract the transcript and other metadata.</p>
<p>Improvements include:</p>
<ul>
<li>rss feed with astrojs</li>
<li>incremental page generation with astrojs, ability to serve the json files directly if desired</li>
<li>ability to group videos by category</li>
<li>improved emails</li>
</ul>
<h2 id="explaination-of-tech-architecture">Explaination of tech architecture</h2>
<p>There are two main components in <a href="https://github.com/dli-invest/media_nlp">media_nlp</a>.</p>
<p>The transcript gathering python script (using <a href="https://pypi.org/project/youtube-transcript-api/">youtube_transcript_api</a>) and the static site generation taken care of by <a href="https://astro.build/">astrojs</a>.</p>
<p>The python scripts in the scripts folder is heavily inspired by ytube_nlp, but generates json files to be processed by astrojs. It uses the youtube data api to fetch videos that were uploaded with 24 hours for channels of interest (hardcoded in config.yml file).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> search_videos_for_channel</span><span style="color:#E1E4E8">(channel_id, params</span><span style="color:#F97583">=</span><span style="color:#79B8FF">dict</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">part</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"snippet"</span><span style="color:#E1E4E8">)):</span></span>
<span class="line"><span style="color:#E1E4E8">    youtube_api </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "https://www.googleapis.com/youtube/v3/search"</span></span>
<span class="line"><span style="color:#E1E4E8">    youtube_api_key </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> os.getenv(</span><span style="color:#9ECBFF">"YOUTUBE_API_KEY"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> youtube_api_key </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">        raise</span><span style="color:#79B8FF"> SystemExit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Need Youtube API KEY"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    params[</span><span style="color:#9ECBFF">"channelId"</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> channel_id</span></span>
<span class="line"><span style="color:#E1E4E8">    params[</span><span style="color:#9ECBFF">"order"</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "date"</span></span>
<span class="line"><span style="color:#E1E4E8">    current_date </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> datetime.now(timezone.utc)</span></span>
<span class="line"><span style="color:#6A737D">    # hardcoded fix for now, only query for videos in august</span></span>
<span class="line"><span style="color:#E1E4E8">    publishedAfter </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (current_date </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> timedelta(</span><span style="color:#FFAB70">days</span><span style="color:#F97583">=</span><span style="color:#79B8FF">REF_DAYS</span><span style="color:#E1E4E8">)).isoformat()</span></span>
<span class="line"><span style="color:#E1E4E8">    params[</span><span style="color:#9ECBFF">"publishedAfter"</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> publishedAfter</span></span>
<span class="line"><span style="color:#E1E4E8">    params[</span><span style="color:#9ECBFF">"maxResults"</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 100</span></span>
<span class="line"><span style="color:#E1E4E8">    params[</span><span style="color:#9ECBFF">"key"</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> youtube_api_key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    r </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> requests.get(youtube_api, </span><span style="color:#FFAB70">params</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">params).json()</span></span>
<span class="line"><span style="color:#6A737D">    # Check if an error object is present</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> r.get(</span><span style="color:#9ECBFF">"error"</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#79B8FF">        print</span><span style="color:#E1E4E8">(r)</span></span>
<span class="line"><span style="color:#79B8FF">        print</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Add Authentication Key"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> r</span></span></code></pre>
<p>The above function grabs the videos from the youtube api within a parameterizated timeframe (usually a day for my purposes). It is highly nlikely that users would create more than 100 videos, but possible for big news channels like cnbc.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> extract_key_video_data</span><span style="color:#E1E4E8">(video_data):</span></span>
<span class="line"><span style="color:#6A737D">    # Takes video search response and extracts the data of interest</span></span>
<span class="line"><span style="color:#6A737D">    # videoId, title, description, channelId, publishedAt</span></span>
<span class="line"><span style="color:#E1E4E8">    key_video_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> video_data </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span><span style="color:#F97583"> or</span><span style="color:#E1E4E8"> video_data </span><span style="color:#F97583">is</span><span style="color:#E1E4E8"> []:</span></span>
<span class="line"><span style="color:#F97583">        return</span></span>
<span class="line"><span style="color:#6A737D">    # video id is None do nothing, it happens during livestreams</span></span>
<span class="line"><span style="color:#6A737D">    # before publishing</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> video </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> video_data.get(</span><span style="color:#9ECBFF">"items"</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">        snippet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> video.get(</span><span style="color:#9ECBFF">"snippet"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        vid_id </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> video.get(</span><span style="color:#9ECBFF">"id"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">        videoId </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> vid_id.get(</span><span style="color:#9ECBFF">"videoId"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">None</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> videoId </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> None</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">            continue</span></span>
<span class="line"><span style="color:#E1E4E8">        channelId </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snippet.get(</span><span style="color:#9ECBFF">"channelId"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        description </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snippet.get(</span><span style="color:#9ECBFF">"description"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        title </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snippet.get(</span><span style="color:#9ECBFF">"title"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        publishedAt </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> snippet.get(</span><span style="color:#9ECBFF">"publishedAt"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        video_data </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> dict</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#FFAB70">            videoId</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">videoId,</span></span>
<span class="line"><span style="color:#FFAB70">            channelId</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">channelId,</span></span>
<span class="line"><span style="color:#FFAB70">            description</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">description,</span></span>
<span class="line"><span style="color:#FFAB70">            title</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">title,</span></span>
<span class="line"><span style="color:#FFAB70">            publishedAt</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">publishedAt,</span></span>
<span class="line"><span style="color:#E1E4E8">        )</span></span>
<span class="line"><span style="color:#E1E4E8">        key_video_data.append(video_data)</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> key_video_data</span></span></code></pre>
<p>This creates a list of key data I am interested in, publishedDate which is useful for knowing the likelyhood of having a transcript.</p>
<p>Afterwards, it uses the youtube_transcript_api to extract the transcript from the video. It takes a few hours for transcripts to appear for a video.
After getting the transcript, spacy is used to perform entity detection and then the results are written to a json file.</p>
<p>Now, the astro site can parse all that information and then output it to static html.</p>
<p>So I have created two github actions, one dependent on the other.</p>
<p>Cron job to scan youtube files and update the repo with new youtube transcript data.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Scan YTube</span></span>
<span class="line"><span style="color:#6A737D"># Don't want to burn my private minutes at this point</span></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">master</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">main</span></span>
<span class="line"><span style="color:#85E89D">    paths-ignore</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">"website/**"</span></span>
<span class="line"><span style="color:#85E89D">  schedule</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # * is a special character in YAML so you have to quote this string</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">cron</span><span style="color:#E1E4E8">:  </span><span style="color:#9ECBFF">'30 13 * * *'</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  YOUTUBE_API_KEY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.YOUTUBE_API_KEY  }}</span></span>
<span class="line"><span style="color:#85E89D">  MJ_APIKEY_PUBLIC</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.MJ_APIKEY_PUBLIC }}</span></span>
<span class="line"><span style="color:#85E89D">  MJ_APIKEY_PRIVATE</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.MJ_APIKEY_PRIVATE }}</span></span>
<span class="line"><span style="color:#85E89D">  DISCORD_CODE_STATUS_WEBHOOK</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DISCORD_CODE_STATUS_WEBHOOK }}</span></span>
<span class="line"><span style="color:#85E89D">  DISCORD_VIDEO_WEBHOOK</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DISCORD_VIDEO_WEBHOOK }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  make_report</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Generate Report</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@master</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Set up Python 3.x</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/setup-python@v1</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          python-version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'3.8'</span><span style="color:#6A737D"> # Semantic version range syntax or exact version of a Python version</span></span>
<span class="line"><span style="color:#85E89D">          architecture</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'x64'</span><span style="color:#6A737D"> # Optional - x64 or x86, defaults to x64</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">installation of dependencies</span></span>
<span class="line"><span style="color:#85E89D">        run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">          if [ -f scripts/requirements.txt ]; then pip install -r scripts/requirements.txt; fi</span></span>
<span class="line"><span style="color:#9ECBFF">          python -m spacy download en_core_web_sm</span></span>
<span class="line"><span style="color:#9ECBFF">          python -m textblob.download_corpora</span></span>
<span class="line"><span style="color:#9ECBFF">      </span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Generate Report</span></span>
<span class="line"><span style="color:#85E89D">        run</span><span style="color:#E1E4E8">:  </span><span style="color:#9ECBFF">python3 scripts/main.py</span></span>
<span class="line"><span style="color:#E1E4E8">      </span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Commit files</span></span>
<span class="line"><span style="color:#85E89D">        run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">          git config --local user.email "action@github.com"</span></span>
<span class="line"><span style="color:#9ECBFF">          git config --local user.name "GitHub Action"</span></span>
<span class="line"><span style="color:#9ECBFF">          git add *.json</span></span>
<span class="line"><span style="color:#9ECBFF">          git add data/ytube</span></span>
<span class="line"><span style="color:#9ECBFF">          git commit -m "added json files"</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Push changes</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ad-m/github-push-action@master</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          github_token</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/upload-artifact@v1</span></span>
<span class="line"><span style="color:#85E89D">        name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Upload Report folder</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">report</span></span>
<span class="line"><span style="color:#85E89D">          path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">data/ytube/investing</span></span></code></pre>
<p>Build the astro files when the data is succcessful gathered from the python script.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># Workflow to build and deploy to your GitHub Pages repo.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Edit your project details here.</span></span>
<span class="line"><span style="color:#6A737D"># Remember to add API_TOKEN_GITHUB in repo Settings > Secrets as well!</span></span>
<span class="line"><span style="color:#85E89D">env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  githubEmail</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&#x3C;YOUR GITHUB EMAIL ADDRESS></span></span>
<span class="line"><span style="color:#85E89D">  deployToRepo</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&#x3C;NAME OF REPO TO DEPLOY TO (E.G. &#x3C;YOUR USERNAME>.github.io)></span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Github Pages Astro CI</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">  # Triggers the workflow on push and pull request events but only for the main branch</span></span>
<span class="line"><span style="color:#85E89D">  push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">main</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">  pull_request</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">main</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">  workflow_run</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    workflows</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"Scan YTube"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">    types</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">completed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  # Allows you to run this workflow manually from the Actions tab.</span></span>
<span class="line"><span style="color:#85E89D">  workflow_dispatch</span><span style="color:#E1E4E8">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  deploy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      # Install dependencies with npm</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Install dependencies</span></span>
<span class="line"><span style="color:#85E89D">        run</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">cd website &#x26;&#x26; npm install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">      # Build the project and add .nojekyll file to supress default behaviour</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build</span></span>
<span class="line"><span style="color:#85E89D">        run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">          cd website</span></span>
<span class="line"><span style="color:#9ECBFF">          npm run build</span></span>
<span class="line"><span style="color:#9ECBFF">          touch ./dist/.nojekyll</span></span>
<span class="line"><span style="color:#6A737D">      # Push to your pages repo</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy ðŸš€</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">JamesIves/github-pages-deploy-action@v4.3.0</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          branch</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">gh-pages</span><span style="color:#6A737D"> # The branch the action should deploy to.</span></span>
<span class="line"><span style="color:#85E89D">          folder</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">website/dist</span><span style="color:#6A737D"> # The folder the action should deploy.</span></span></code></pre>
<p>Hopefully this will be enough to understand how the general workflow works. Some of the things I have learned are:</p>
<ul>
<li>How to use the github actions workflow to trigger another workflow</li>
<li>How to interact with the youtube data api</li>
<li>Basic nlp with spacy is not all that useful for this project, but it is a good starting point.</li>
<li>If I had phrase extraction, it might get fairly interesting.</li>
</ul> </content></div></div></div></div> <div class="mx-auto max-w-screen-lg px-3 py-6"> <div class="no-print flex w-full"> <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form> <div class="ml-3 max-w-lg bg-slate-300"> <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script> <div id="search" class="ml-3 p-4"></div> <script type="module">window.addEventListener("DOMContentLoaded",e=>{setTimeout(()=>{new PagefindUI({element:"#search"})},2e3)});</script> </div> </div> </div>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">Â© Copyright <!-- -->2026<!-- --> by <!-- -->FriendlyUsers Tech Blog<!-- -->. Built with â™¥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2026-02-26<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div> </body></html>