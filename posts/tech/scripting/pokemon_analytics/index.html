<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics on Pokemon using polygot notebooks - Astro Tech Blog</title>
    <meta name="description" content="Using .NET scripting to analyze Pokemon data">
    <meta name="author" content="David Li">

    <link rel="alternate" type="application/rss+xml" href="/rss.xml">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">

    </script>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6">

    </script>
    
    <script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch(err) {
          // do nothing here
        }
      }
    </script>
  <link rel="stylesheet" href="/assets/index.3d8bed01.css" />
<link rel="stylesheet" href="/assets/index.2f84984c.css" /><script type="module" src="/hoisted.e1d2364b.js"></script></head>
  <body class="bg-slate-900 text-gray-100">
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div>
    <div data-pagefind-body>
      <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Analytics on Pokemon using polygot notebooks</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Saturday, 14 May 2023 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/graphql" style="padding-right:3px"> <category>graphql<!-- --> </category> </a></div><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/.net" style="padding-right:3px"> <category>.net<!-- --> </category> </a></div><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/polygot" style="padding-right:3px"> <category>polygot<!-- --> </category> </a></div></div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-w-3 aspect-h-2"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/DALL·E 2022-12-25 21.48.12 - teddy bear on coach looking out the window at a tree.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content><p>For the first post to scrap data, see</p>
<p><a href="https://friendlyuser.github.io/posts/tech/flutter/scrapping_data_for_pokedex/">https://friendlyuser.github.io/posts/tech/flutter/scrapping_data_for_pokedex/</a></p>
<p>This code is trying to retrieve a JSON array from the specified URL, parse it into a list of Pokemon objects, and then print out the names of the first 10 Pokemon objects in the list.</p>
<p>Here’s a breakdown of what each part of the code is doing:</p>
<ol>
<li>The HttpClient object is used to send HTTP requests and receive HTTP responses from a specified URI.</li>
<li>The GetAsync method sends a GET request to the specified URI and returns the response as a Task object. The Result property of the Task object is used to get the actual HttpResponseMessage object.</li>
<li>The Content property of the HttpResponseMessage object contains the body of the response, which is the JSON array in this case. The ReadAsStringAsync method is used to read the content as a string.</li>
<li>The JsonSerializer.Deserialize method is used to parse the JSON string into a list of Pokemon objects.</li>
<li>The loop iterates through the first 10 Pokemon objects in the list and prints out their names.</li>
</ol>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #88846F">// load json array from https://raw.githubusercontent.com/FriendlyUser/flutter_pokedex/main/scripts/clean_pokemon.json</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Collections</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Generic</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Net</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Http</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Text</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Json</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Text</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Json</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Serialization</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">PokemonV2Pokemontype</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">PokemonV2Type</span><span style="color: #F8F8F2"> pokemon_v2_type { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">PokemonV2Type</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> name { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// public int move_damage_class_id { get; set; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> generation_id { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> id { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Pokemon</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> name { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> id { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> pokemon_species_id { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; font-weight: bold">PokemonV2Pokemontype</span><span style="color: #F8F8F2">> pokemon_v2_pokemontypes { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> img_src { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">PokemonList</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; font-weight: bold">Pokemon</span><span style="color: #F8F8F2">> pokemon { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// load json array from https://raw.githubusercontent.com/FriendlyUser/flutter_pokedex/main/scripts/clean_pokemon.json</span></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> client </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">HttpClient</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> response </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> client.</span><span style="color: #A6E22E">GetAsync</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"https://raw.githubusercontent.com/FriendlyUser/flutter_pokedex/main/scripts/clean_pokemon.json"</span><span style="color: #F8F8F2">).Result;</span></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> content </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> response.Content.</span><span style="color: #A6E22E">ReadAsStringAsync</span><span style="color: #F8F8F2">().Result;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// parse content into a list of Pokemon objects</span></span>
<span class="line"><span style="color: #A6E22E; font-weight: bold">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; font-weight: bold">Pokemon</span><span style="color: #F8F8F2">> pokemonList </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #F8F8F2">                JsonSerializer.</span><span style="color: #A6E22E">Deserialize</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; font-weight: bold">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; font-weight: bold">Pokemon</span><span style="color: #F8F8F2">>>(content);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// print out the first 10 pokemon</span></span>
<span class="line"><span style="color: #F92672">for</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> i </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">; i </span><span style="color: #F92672">&#x3C;</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">10</span><span style="color: #F8F8F2">; i</span><span style="color: #F92672">++</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    Console.</span><span style="color: #A6E22E">WriteLine</span><span style="color: #F8F8F2">(pokemonList[i].name);</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<p>Then we install the depedencies and run the script</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #F8F8F2">#i "nuget:https:</span><span style="color: #88846F">//pkgs.dev.azure.com/dnceng/public/_packaging/dotnet7/nuget/v3/index.json" </span></span>
<span class="line"><span style="color: #F8F8F2">#i "nuget:https:</span><span style="color: #88846F">//pkgs.dev.azure.com/dnceng/public/_packaging/dotnet-tools/nuget/v3/index.json" </span></span>
<span class="line"><span style="color: #F8F8F2">#</span><span style="color: #F92672">r</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"nuget: Plotly.NET, 3.0.1"</span></span>
<span class="line"><span style="color: #F8F8F2">#</span><span style="color: #F92672">r</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"nuget: Plotly.NET.Interactive, 3.0.2"</span></span></code></pre>
<p>This code is using the #i and #r directives to install and reference NuGet packages in a .NET project.</p>
<p>The #i directive is used to install a NuGet package source, which is a location where packages can be found and downloaded. The first #i directive installs the package source for the .NET 7 runtime, and the second #i directive installs the package source for .NET tools.</p>
<p>The #r directive is used to reference a NuGet package in the project. The first #r directive references the Plotly.NET package, which is a library for creating interactive and animated charts and graphs in .NET. The second #r directive references the Plotly.NET.Interactive package, which provides interactive features for plots created with the Plotly.NET library.</p>
<p>These directives are typically used at the top of a .NET script file or in a paket.dependencies file to manage the packages used in a project.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Linq</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Microsoft</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">FSharp</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">Core</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Plotly</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">NET</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">static</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Plotly</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">NET</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">GenericChartExtensions</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Plotly</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">NET</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; font-weight: bold">LayoutObjects</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #88846F">// group the pokemon by type, can have duplicates</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> groupedPokemon </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Dictionary</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #F92672">string</span><span style="color: #F8F8F2">, </span><span style="color: #F92672">int</span><span style="color: #F8F8F2">>();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">foreach</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> pokemon </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> pokemonList)</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">foreach</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> type </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> pokemon.pokemon_v2_pokemontypes)</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (groupedPokemon.</span><span style="color: #A6E22E">ContainsKey</span><span style="color: #F8F8F2">(type.pokemon_v2_type.name))</span></span>
<span class="line"><span style="color: #F8F8F2">        {</span></span>
<span class="line"><span style="color: #F8F8F2">            groupedPokemon[type.pokemon_v2_type.name] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> groupedPokemon[type.pokemon_v2_type.name] </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">else</span></span>
<span class="line"><span style="color: #F8F8F2">        {</span></span>
<span class="line"><span style="color: #F8F8F2">            groupedPokemon.</span><span style="color: #A6E22E">Add</span><span style="color: #F8F8F2">(type.pokemon_v2_type.name, </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">void</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">makePlot</span><span style="color: #F8F8F2">(</span><span style="color: #A6E22E; font-weight: bold">Dictionary</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #F92672">string</span><span style="color: #F8F8F2">, </span><span style="color: #F92672">int</span><span style="color: #F8F8F2">> dataDict, </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> xTitle, </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> yTitle, </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> title, </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> width </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1280</span><span style="color: #F8F8F2">) </span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> x </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> dataDict.Keys.</span><span style="color: #A6E22E">ToArray</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> y </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> dataDict.Values.</span><span style="color: #A6E22E">ToArray</span><span style="color: #F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E; font-weight: bold">LinearAxis</span><span style="color: #F8F8F2"> xAxis </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">LinearAxis</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">    xAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"title"</span><span style="color: #F8F8F2">, xTitle);</span></span>
<span class="line"><span style="color: #F8F8F2">    xAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"showgrid"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">false</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    xAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"showline"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">true</span><span style="color: #F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E; font-weight: bold">LinearAxis</span><span style="color: #F8F8F2"> yAxis </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">LinearAxis</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">    yAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"title"</span><span style="color: #F8F8F2">, yTitle);</span></span>
<span class="line"><span style="color: #F8F8F2">    yAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"showgrid"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">false</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    yAxis.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"showline"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">true</span><span style="color: #F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E; font-weight: bold">Layout</span><span style="color: #F8F8F2"> layout </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Layout</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">    layout.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"xaxis"</span><span style="color: #F8F8F2">, xAxis);</span></span>
<span class="line"><span style="color: #F8F8F2">    layout.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"yaxis"</span><span style="color: #F8F8F2">, yAxis);</span></span>
<span class="line"><span style="color: #F8F8F2">    layout.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"title"</span><span style="color: #F8F8F2">, title);</span></span>
<span class="line"><span style="color: #F8F8F2">    layout.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"width"</span><span style="color: #F8F8F2">, width);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E; font-weight: bold">Trace</span><span style="color: #F8F8F2"> trace </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Trace</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"bar"</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    trace.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"x"</span><span style="color: #F8F8F2">, x);</span></span>
<span class="line"><span style="color: #F8F8F2">    trace.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"y"</span><span style="color: #F8F8F2">, y);</span></span>
<span class="line"><span style="color: #F8F8F2">    trace.</span><span style="color: #A6E22E">SetValue</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"mode"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"markers"</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// trace.SetValue("name", characterName);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> chart </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> GenericChart.</span><span style="color: #A6E22E">ofTraceObject</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">true</span><span style="color: #F8F8F2">, trace).</span><span style="color: #A6E22E">WithLayout</span><span style="color: #F8F8F2">(layout);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// figure out how to save static files</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> data </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> GenericChart.</span><span style="color: #A6E22E">toChartHTML</span><span style="color: #F8F8F2">(chart);</span></span>
<span class="line"><span style="color: #F8F8F2">    DisplayExtensions.</span><span style="color: #A6E22E">DisplayAs</span><span style="color: #F8F8F2">(data,</span><span style="color: #E6DB74">"text/html"</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"><span style="color: #A6E22E">makePlot</span><span style="color: #F8F8F2">(groupedPokemon, </span><span style="color: #E6DB74">"Type"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number of pokemon per type (up to generation viii"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">1280</span><span style="color: #F8F8F2">);</span></span></code></pre>
<p>This code is creating a bar chart using the Plotly.NET library to visualize the number of Pokémon of each type in the pokemonList collection.</p>
<p>Here’s a breakdown of what each part of the code is doing:</p>
<ol>
<li>The groupedPokemon dictionary is initialized to store the types of Pokémon as keys and the number of Pokémon of each type as values.</li>
<li>The foreach loop iterates over each Pokémon in the pokemonList and updates the groupedPokemon dictionary by incrementing the count for each type of Pokémon that the current Pokémon has.</li>
<li>The makePlot function is defined to take a dictionary of data, the titles for the x and y axes, a title for the chart, and an optional width parameter. The function creates a LinearAxis object for the x and y axes and sets various properties for them. It then creates a Layout object to specify the overall layout of the chart, including the x and y axes, the title, and the width.</li>
<li>A Trace object is created to specify the data for the chart and set various properties for the data series, such as the mode (which determines how the data points are plotted).</li>
<li>The GenericChart.ofTraceObject method is used to create a GenericChart object from the Trace object, and the WithLayout method is used to apply the layout to the chart.</li>
<li>The GenericChart.toChartHTML method is used to generate the HTML code for the chart, and the DisplayExtensions.DisplayAs method is used to display the chart as an HTML page in the console.</li>
</ol>
<p><img src="/imgs/2023/pokedex_types.png" alt="pokedex"></p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #88846F">// number of pokemon per generation</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> groupedPokemonByGeneration </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Dictionary</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #F92672">string</span><span style="color: #F8F8F2">, </span><span style="color: #F92672">int</span><span style="color: #F8F8F2">>();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">foreach</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> pokemon </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> pokemonList)</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (groupedPokemonByGeneration.</span><span style="color: #A6E22E">ContainsKey</span><span style="color: #F8F8F2">(pokemon.pokemon_v2_pokemontypes.</span><span style="color: #A6E22E">First</span><span style="color: #F8F8F2">().pokemon_v2_type.generation_id.</span><span style="color: #A6E22E">ToString</span><span style="color: #F8F8F2">()))</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        groupedPokemonByGeneration[pokemon.pokemon_v2_pokemontypes.</span><span style="color: #A6E22E">First</span><span style="color: #F8F8F2">().pokemon_v2_type.generation_id.</span><span style="color: #A6E22E">ToString</span><span style="color: #F8F8F2">()] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> groupedPokemonByGeneration[pokemon.pokemon_v2_pokemontypes.</span><span style="color: #A6E22E">First</span><span style="color: #F8F8F2">().pokemon_v2_type.generation_id.</span><span style="color: #A6E22E">ToString</span><span style="color: #F8F8F2">()] </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">else</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        groupedPokemonByGeneration.</span><span style="color: #A6E22E">Add</span><span style="color: #F8F8F2">(pokemon.pokemon_v2_pokemontypes.</span><span style="color: #A6E22E">First</span><span style="color: #F8F8F2">().pokemon_v2_type.generation_id.</span><span style="color: #A6E22E">ToString</span><span style="color: #F8F8F2">(), </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A6E22E">makePlot</span><span style="color: #F8F8F2">(groupedPokemonByGeneration, </span><span style="color: #E6DB74">"Generation"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number of types by generation (up to generation viii)"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">1280</span><span style="color: #F8F8F2">);</span></span></code></pre>
<p>As you can see new types were adding in gen 6 and gen 2, believe its steel and fairy.</p>
<p><img src="/imgs/2023/pokedex_types_by_gen.png" alt="pokedex"></p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #88846F">// starting letters for pokemon plot</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">var</span><span style="color: #F8F8F2"> groupedPokemonByFirstLetter </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; font-weight: bold">Dictionary</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #F92672">string</span><span style="color: #F8F8F2">, </span><span style="color: #F92672">int</span><span style="color: #F8F8F2">>();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">foreach</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> pokemon </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> pokemonList)</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> firstLetter </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> pokemon.name.</span><span style="color: #A6E22E">Substring</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (groupedPokemonByFirstLetter.</span><span style="color: #A6E22E">ContainsKey</span><span style="color: #F8F8F2">(firstLetter))</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        groupedPokemonByFirstLetter[firstLetter]</span><span style="color: #F92672">++</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">else</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        groupedPokemonByFirstLetter.</span><span style="color: #A6E22E">Add</span><span style="color: #F8F8F2">(firstLetter, </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// plot </span></span>
<span class="line"><span style="color: #A6E22E">makePlot</span><span style="color: #F8F8F2">(groupedPokemonByFirstLetter, </span><span style="color: #E6DB74">"First Letter"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number"</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">"Number of pokemon by first letter"</span><span style="color: #F8F8F2">, </span><span style="color: #AE81FF">1280</span><span style="color: #F8F8F2">);</span></span></code></pre>
<p><img src="imgs/2023/pokedex_by_first_letter.png" alt="pokedex"></p>
<h2 id="references">References</h2>
<p><a href="https://friendlyuser.github.io/pokemon_stats/">https://friendlyuser.github.io/pokemon_stats/</a></p></content></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print flex w-full">
    <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form>
    <div class="ml-3 max-w-lg bg-slate-300">
      <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
      <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
      <div id="search" class="ml-3 p-4"></div>
      
    </div>
  </div></div>
    </div>
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2023<!-- --> by <!-- -->Astro Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2023-02-09<!-- -->.</div></div></div>
  </body></html>