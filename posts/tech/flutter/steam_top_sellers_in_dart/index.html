<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrapping the steam top sellers with dart - Astro Tech Blog</title>
    <meta name="description" content="Adding an endpoint on a dart backend to get the top sellers from steam">
    <meta name="author" content="David Li">

    <link rel="alternate" type="application/rss+xml" href="/rss.xml">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">

    </script>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6">

    </script>
    
    <script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch(err) {
          // do nothing here
        }
      }
    </script>
  <link rel="stylesheet" href="/_astro/index.3d8bed01.css" />
<link rel="stylesheet" href="/_astro/index.2f84984c.css" /><script type="module" src="/_astro/hoisted.4b7a3691.js"></script></head>
  <body class="bg-slate-900 text-gray-100">
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div>
    <div data-pagefind-body>
      <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Scrapping the steam top sellers with dart</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Fri, 28 Feburary 2024</div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/bs4" style="padding-right:3px"> <category>bs4<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-sky-400 text-sky-900"> <a href="/tags/dart" style="padding-right:3px"> <category>dart<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-red-400 text-red-900"> <a href="/tags/alfred" style="padding-right:3px"> <category>alfred<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-w-3 aspect-h-2"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/986397498.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content><p>Web scraping is a technique used to extract data from websites, with the help of a software program. This process involves sending HTTP requests to the URL of a website and then parsing the HTML response to extract data from it. The data that can be scraped from websites includes text, images, videos, and links to other pages. The extracted data can be saved to a local file or a database, or it can be used to perform further analysis and processing.</p>
<p>Web scraping is commonly used for a variety of purposes, including data mining, data analysis, price comparison, sentiment analysis, and much more. It’s an efficient and automated way to collect information from websites, and it can save a significant amount of time compared to manual data collection.</p>
<p>However, it’s important to note that web scraping can be unethical if it is performed without the consent of the website owner or if it violates the website’s terms of service. Additionally, some websites may have protections in place to prevent web scraping, such as CAPTCHAs or rate limiting, so it’s important to respect the rules of the websites you scrape.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #F8F8F2"> </span></span>
<span class="line"><span style="color: #66D9EF">Future</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F8F8F2">>> </span><span style="color: #A6E22E">findTopSteamSellers</span><span style="color: #F8F8F2">() </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> url </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">Uri</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E">https</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'store.steampowered.com'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">'search/?filter=topsellers'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> html </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> http.</span><span style="color: #F92672">get</span><span style="color: #F8F8F2">(url);</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">parseSteamTopSellers</span><span style="color: #F8F8F2">(html.body);</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF">List</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F8F8F2">> </span><span style="color: #A6E22E">parseSteamTopSellers</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF">String</span><span style="color: #F8F8F2"> rawHTML ) {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">BeautifulSoup</span><span style="color: #F8F8F2">  soup </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">BeautifulSoup</span><span style="color: #F8F8F2">(rawHTML);</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> searchResultsDiv </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> soup.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'div'</span><span style="color: #F8F8F2">, attrs</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> {</span><span style="color: #E6DB74">'id'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'search_resultsRows'</span><span style="color: #F8F8F2">});</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (searchResultsDiv </span><span style="color: #F92672">==</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">null</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">&#x3C;</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F92672">></span><span style="color: #F8F8F2">[];</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> topSellers </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> searchResultsDiv.</span><span style="color: #A6E22E">findAll</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'a'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (topSellers.isEmpty) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">&#x3C;</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F92672">></span><span style="color: #F8F8F2">[];</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> topSellersList </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">&#x3C;</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F92672">></span><span style="color: #F8F8F2">[];</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">for</span><span style="color: #F8F8F2"> (</span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> topSeller </span><span style="color: #F92672">in</span><span style="color: #F8F8F2"> topSellers) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> imageDiv </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> topSeller.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'img'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> imageSrc </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">''</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (imageDiv </span><span style="color: #F92672">!=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">null</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">      imageSrc </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> imageDiv.attributes[</span><span style="color: #E6DB74">'src'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> title </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> topSeller.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'span'</span><span style="color: #F8F8F2">, attrs</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> {</span><span style="color: #E6DB74">'class'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'title'</span><span style="color: #F8F8F2">})</span><span style="color: #F92672">?</span><span style="color: #F8F8F2">.text;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> publishDate </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> topSeller.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'div'</span><span style="color: #F8F8F2">, attrs</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> {</span><span style="color: #E6DB74">'class'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'col search_released responsive_secondrow'</span><span style="color: #F8F8F2">})</span><span style="color: #F92672">?</span><span style="color: #F8F8F2">.text;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// var publishDate = topSeller.find('div', attrs: {'class': 'tab_item_top_tags'}).text;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// get data-price-final</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> price </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> topSeller.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'div'</span><span style="color: #F8F8F2">, attrs</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> {</span><span style="color: #E6DB74">'class'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'search_price_discount_combined'</span><span style="color: #F8F8F2">})</span><span style="color: #F92672">?</span><span style="color: #F8F8F2">.attributes[</span><span style="color: #E6DB74">'data-price-final'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> discountDiv </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> topSeller.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'div'</span><span style="color: #F8F8F2">, attrs</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> {</span><span style="color: #E6DB74">'class'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'search_discount'</span><span style="color: #F8F8F2">});</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF">String</span><span style="color: #F8F8F2"> discount </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">""</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (discountDiv </span><span style="color: #F92672">!=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">null</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> discountSpan </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> discountDiv.</span><span style="color: #A6E22E">find</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"span"</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (discountSpan </span><span style="color: #F92672">!=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">null</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">        discount </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> discountSpan.text;</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">    topSellersList.</span><span style="color: #A6E22E">add</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F8F8F2">(imageSrc, title, price, publishDate, discount));</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> topSellersList; </span></span></code></pre>
<p>This code is a function in Dart that performs web scraping. It uses the <code>http</code> library to make a GET request to the Steam store’s top sellers page and retrieve its HTML content. Then it uses the <code>BeautifulSoup</code> library to parse the HTML and extract information about the top-selling games on Steam.</p>
<p>The <code>parseSteamTopSellers</code> function takes the raw HTML as a string as an argument, and uses the <code>BeautifulSoup</code> library to create a soup object. It then searches the HTML for the <code>div</code> element with an <code>id</code> of <code>search_resultsRows</code>, which contains the information about the top-selling games. If this <code>div</code> element is not found, the function returns an empty list.</p>
<p>Next, the code finds all the <code>a</code> elements within the <code>div</code> element, which correspond to individual games. For each game, the code extracts information such as the image source, title, publication date, price, and discount. It creates a <code>SteamTopSeller</code> object with this information and adds it to a list. Finally, the function returns this list of <code>SteamTopSeller</code> objects.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> imageSrc;</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> title;</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> price;</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> publishDate;</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">String</span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> discount;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">SteamTopSeller</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.imageSrc, </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.title, </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.price, </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.publishDate, </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.discount);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #A6E22E">fromJson</span><span style="color: #F8F8F2">(</span><span style="color: #66D9EF">Map</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF">String</span><span style="color: #F8F8F2">, </span><span style="color: #66D9EF">dynamic</span><span style="color: #F8F8F2">> json) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.imageSrc </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> json[</span><span style="color: #E6DB74">'imageSrc'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.title </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> json[</span><span style="color: #E6DB74">'title'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.price </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> json[</span><span style="color: #E6DB74">'price'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.publishDate </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> json[</span><span style="color: #E6DB74">'publishDate'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.discount </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> json[</span><span style="color: #E6DB74">'discount'</span><span style="color: #F8F8F2">];</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF">Map</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF">String</span><span style="color: #F8F8F2">, </span><span style="color: #66D9EF">dynamic</span><span style="color: #F8F8F2">> </span><span style="color: #A6E22E">toJson</span><span style="color: #F8F8F2">() {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #E6DB74">'imageSrc'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.imageSrc,</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #E6DB74">'title'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.title,</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #E6DB74">'price'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.price,</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #E6DB74">'publishDate'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.publishDate,</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #E6DB74">'discount'</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #FD971F">this</span><span style="color: #F8F8F2">.discount,</span></span>
<span class="line"><span style="color: #F8F8F2">    };</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span></code></pre>
<p>This is a class definition for the <code>SteamTopSeller</code> object in Dart. It contains fields for the image source, title, price, publication date, and discount of a top-selling game on the Steam store.</p>
<p>The class has a constructor that takes these fields as arguments and sets them to the instance’s fields. It also has a <code>fromJson</code> method that creates a <code>SteamTopSeller</code> object from a JSON map and a <code>toJson</code> method that returns a JSON map representation of the object. These methods can be used for serializing and deserializing the <code>SteamTopSeller</code> object to and from JSON data, respectively.</p>
<p>For alfred classes, we require a <code>fromJson</code> and <code>toJson</code> method to be defined. This is because the <code>alfred</code> library uses the method  serialize and deserialize objects to and from JSON data. The <code>alfred</code> package requires that a <code>fromJson</code> and <code>toJson</code> method be defined for each class that needs to be serialized and deserialized.</p>
<pre is:raw="" class="astro-code" style="background-color: #272822; overflow-x: auto;"><code><span class="line"><span style="color: #F8F8F2"> </span><span style="color: #88846F">// load sample.html and run findTopSteamSellers, expect list of top steam sellers</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'dart:io'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'package:test/test.dart'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"package:dart_off_server/core.dart"</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> core;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"package:path/path.dart"</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> p;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF">void</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">main</span><span style="color: #F8F8F2">() {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #A6E22E">test</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'calculate'</span><span style="color: #F8F8F2">, () {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> rawHTMLPath </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> p.</span><span style="color: #A6E22E">join</span><span style="color: #F8F8F2">(p.current, </span><span style="color: #E6DB74">'test'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">'sample.html'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// load rawHTML from rawHTMLPath</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF">File</span><span style="color: #F8F8F2"> file </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF">File</span><span style="color: #F8F8F2">(rawHTMLPath);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> rawHTML </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> file.</span><span style="color: #A6E22E">readAsStringSync</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF">var</span><span style="color: #F8F8F2"> steamSellers </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> core.</span><span style="color: #A6E22E">parseSteamTopSellers</span><span style="color: #F8F8F2">(rawHTML);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// greater than 5</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">expect</span><span style="color: #F8F8F2">(steamSellers.length, </span><span style="color: #A6E22E">greaterThan</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">5</span><span style="color: #F8F8F2">));</span></span>
<span class="line"><span style="color: #F8F8F2">  });</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"><span style="color: #F8F8F2"> </span></span></code></pre>
<p>This is a test case for the <code>parseSteamTopSellers</code> function, which is defined in the <code>core.dart</code> file. The test case is written using the <code>test</code> function from the <code>test</code> package.</p>
<p>The test case starts by loading the sample HTML file, <code>sample.html</code>, into a string, <code>rawHTML</code>, using the <code>readAsStringSync</code> method of the <code>File</code> class. The <code>rawHTML</code> string is then passed to the <code>parseSteamTopSellers</code> function, which returns a list of <code>SteamTopSeller</code> objects.</p>
<p>The test case then uses the <code>expect</code> function to check that the length of the list of top sellers is greater than 5. This is just a simple example to verify that the <code>parseSteamTopSellers</code> function is correctly parsing the HTML and returning a list of <code>SteamTopSeller</code> objects. In a real scenario, you might want to write more tests to check the contents of the list, as well as edge cases where the HTML is not in the expected format.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://friendlyuser.github.io/posts/tech/flutter/alfred_backend_with_open_food_facts_api/">https://friendlyuser.github.io/posts/tech/flutter/alfred_backend_with_open_food_facts_api/</a></li>
<li><a href="https://huggingface.co/spaces/FriendlyUser/dart_off_server/tree/main">https://huggingface.co/spaces/FriendlyUser/dart_off_server/tree/main</a></li>
</ul></content></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print flex w-full">
    <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form>
    <div class="ml-3 max-w-lg bg-slate-300">
      <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
      <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
      <div id="search" class="ml-3 p-4"></div>
      
    </div>
  </div></div>
    </div>
    <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2023<!-- --> by <!-- -->Astro Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2023-03-19<!-- -->.</div></div></div>
  </body></html>