<!DOCTYPE html><html lang="en"><head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>A Deep Dive into Dapper ORM A High-Performance Micro-ORM for .NET - Astro Tech Blog</title><meta name="description" content="In this article, we'll explore the features, benefits, and usage of Dapper ORM."><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.43f032cc.css" />
<style type="text/css">@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.0ec709ce.js"></script></head><body class="bg-slate-900 text-gray-100"><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div><div data-pagefind-body><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">A Deep Dive into Dapper ORM A High-Performance Micro-ORM for .NET</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->2024-05-15T13:51:04.000Z</div><div class="flex place-content-center pt-2"></div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-w-3 aspect-h-2"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/bear_book_1.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content><h1 id="a-deep-dive-into-dapper-orm-a-high-performance-micro-orm-for-net">A Deep Dive into Dapper ORM: A High-Performance Micro-ORM for .NET</h1>
<h2 id="introduction">Introduction</h2>
<p>Object-Relational Mapping (ORM) has become an essential component of modern application development. It simplifies data access and manipulation by providing a bridge between object-oriented programming (OOP) and relational database management systems (RDBMS). While there are numerous ORM solutions available, Dapper ORM stands out due to its simplicity, performance, and flexibility.</p>
<p>Dapper is a Micro-ORM (Object-Relational Mapper) for .NET, designed to be fast and lightweight. It was developed by Stack Overflow to address the performance limitations they experienced with other ORM solutions. In this article, we’ll explore the features, benefits, and usage of Dapper ORM.</p>
<h2 id="dapper-orm-features-and-benefits">Dapper ORM: Features and Benefits</h2>
<h3 id="high-performance">High Performance</h3>
<p>Dapper is known for its high performance, even when compared with other popular ORM solutions. With its streamlined design and minimal overhead, Dapper allows developers to write efficient data access code without sacrificing readability or maintainability.</p>
<h3 id="simplicity">Simplicity</h3>
<p>Dapper is a Micro-ORM, which means it focuses on a small set of core features, avoiding the complexity often associated with full-fledged ORMs. Its API is straightforward and easy to understand, making it accessible to both novice and experienced developers.</p>
<h3 id="flexibility">Flexibility</h3>
<p>Dapper doesn’t impose any specific patterns or conventions on your code. It works seamlessly with your existing data structures and SQL queries. This flexibility makes it suitable for projects with complex or custom database schemas and allows developers to optimize their data access code as needed.</p>
<h3 id="lightweight-and-easy-to-install">Lightweight and Easy to Install</h3>
<p>Dapper is distributed as a single DLL file, making it easy to include in your projects. It’s also available as a NuGet package, so you can install and update it using the standard .NET package management tools.</p>
<h2 id="getting-started-with-dapper-orm">Getting Started with Dapper ORM</h2>
<p>To start using Dapper, you’ll need to install the <code>Dapper</code> NuGet package in your project. You can do this using the Package Manager Console:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F8F8F2">Install-Package Dapper</span></span></code></pre>
<p>Once you have Dapper installed, you’ll need to create a connection to your database. Dapper works with any ADO.NET-compatible data provider, such as SQL Server, MySQL, or SQLite. In this example, we’ll use SQL Server:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">System</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; text-decoration: underline">Data</span><span style="color: #F8F8F2">.</span><span style="color: #A6E22E; text-decoration: underline">SqlClient</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">Dapper</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">string</span><span style="color: #F8F8F2"> connectionString </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"Data Source=(localdb)</span><span style="color: #AE81FF">\\</span><span style="color: #E6DB74">MSSQLLocalDB;Initial Catalog=MyDatabase;Integrated Security=True"</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> connection </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">SqlConnection</span><span style="color: #F8F8F2">(connectionString))</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Your Dapper code here</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h2 id="querying-data-with-dapper">Querying Data with Dapper</h2>
<p>Dapper provides extension methods for the <code>IDbConnection</code> interface, allowing you to perform queries and execute commands using familiar SQL syntax.</p>
<p>To query data, use the <code>Query</code> or <code>QueryAsync</code> methods. These methods can return either dynamic objects or strongly-typed results. Here’s an example:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">class</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">Person</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> Id { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> FirstName { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">public</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">string</span><span style="color: #F8F8F2"> LastName { </span><span style="color: #F92672">get</span><span style="color: #F8F8F2">; </span><span style="color: #F92672">set</span><span style="color: #F8F8F2">; }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> connection </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">SqlConnection</span><span style="color: #F8F8F2">(connectionString))</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E; text-decoration: underline">IEnumerable</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; text-decoration: underline">Person</span><span style="color: #F8F8F2">> people </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> connection.</span><span style="color: #A6E22E">Query</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; text-decoration: underline">Person</span><span style="color: #F8F8F2">>(</span><span style="color: #E6DB74">"SELECT * FROM People"</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h2 id="inserting-updating-and-deleting-data">Inserting, Updating, and Deleting Data</h2>
<p>For commands that modify data, such as <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code>, use the <code>Execute</code> or <code>ExecuteAsync</code> methods. These methods return the number of rows affected:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> connection </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">SqlConnection</span><span style="color: #F8F8F2">(connectionString))</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> rowsAffected </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> connection.</span><span style="color: #A6E22E">Execute</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"INSERT INTO People (FirstName, LastName) VALUES (@FirstName, @LastName)"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> { FirstName </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"John"</span><span style="color: #F8F8F2">, LastName </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"Doe"</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h2 id="handling-transactions">Handling Transactions</h2>
<p>Dapper also supports transactions, making it easy to execute multiple commands as a single atomic operation. To use transactions, simply create and manage an <code>IDbTransaction</code> object:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">using</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> connection </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">SqlConnection</span><span style="color: #F8F8F2">(connectionString))</span></span>
<span class="line"><span style="color: #F8F8F2">{</span></span>
<span class="line"><span style="color: #F8F8F2">    connection.</span><span style="color: #A6E22E">Open</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">using</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">var</span><span style="color: #F8F8F2"> transaction </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> connection.</span><span style="color: #A6E22E">BeginTransaction</span><span style="color: #F8F8F2">())</span></span>
<span class="line"><span style="color: #F8F8F2">    {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">try</span></span>
<span class="line"><span style="color: #F8F8F2">        {</span></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> rowsAffected1 </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> connection.</span><span style="color: #A6E22E">Execute</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"UPDATE People SET LastName = @LastName WHERE Id = @Id"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> { Id </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">, LastName </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">"Smith"</span><span style="color: #F8F8F2"> }, transaction);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">int</span><span style="color: #F8F8F2"> rowsAffected2 </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> connection.</span><span style="color: #A6E22E">Execute</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">"DELETE FROM People WHERE Id = @Id"</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> { Id </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2"> }, transaction);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">            transaction.</span><span style="color: #A6E22E">Commit</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (</span><span style="color: #A6E22E; text-decoration: underline">Exception</span><span style="color: #F8F8F2">)</span></span>
<span class="line"><span style="color: #F8F8F2">        {</span></span>
<span class="line"><span style="color: #F8F8F2">            transaction.</span><span style="color: #A6E22E">Rollback</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">throw</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>Dapper ORM is a powerful and flexible Micro-ORM for .NET, offering high performance, simplicity, and a lightweight footprint. Its intuitive API and compatibility with ADO.NET data providers make it an attractive choice for developers looking to optimize their data access code. With Dapper, you can build data-driven applications that are fast, maintainable, and scalable.</p></content></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print flex w-full"><form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form><div class="ml-3 max-w-lg bg-slate-300"><link href="/_pagefind/pagefind-ui.css" rel="stylesheet"><script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script><div id="search" class="ml-3 p-4"></div></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2023<!-- --> by <!-- -->Astro Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2023-12-19<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div></body></html>