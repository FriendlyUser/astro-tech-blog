<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Creating a networked game with phaser and nodejs - FriendlyUsers Tech Blog</title><meta name="description" content="In this post I will show you how to create a simple networked game with phaser and nodejs."><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="module">(function(e,n,r,t,m){e[t]=e[t]||[],e[t].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s="";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-K8P5P8FQ");</script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","UA-119155027-6");</script><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.BvkiO192.css">
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts" target="_self">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog" target="_self">GitHub</a></li></ul></nav></div></div> <div data-pagefind-body>  <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Creating a networked game with phaser and nodejs</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Fri, 14 May 2024</div><div class="flex place-content-center pt-2"><div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/phaser" style="padding-right:3px"> <category>phaser<!-- --> </category></a></span></div> <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/nodejs" style="padding-right:3px"> <category>nodejs<!-- --> </category></a></span></div> <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/js" style="padding-right:3px"> <category>js<!-- --> </category></a></span></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/2776175216.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content> <p>A networked game is a type of video game that allows multiple players to interact and play the game together over a network, such as the internet or a local area network (LAN). Networked games can be played by players who are physically located in different places, and they often involve real-time gameplay where players can communicate and collaborate with each other in order to achieve game objectives. Networked games can take many forms, including multiplayer online games, co-operative games, and competitive games. Some popular examples of networked games include massively multiplayer online role-playing games (MMORPGs), first-person shooters, and real-time strategy games.</p>
<p>In a multiplayer game, the server-side code is responsible for managing various aspects of the game to ensure that all players have a consistent and fair gameplay experience. Here are some of the key responsibilities of server-side code in a multiplayer game:</p>
<ol>
<li>Game state management: The server-side code is responsible for maintaining the current state of the game, including player positions, game objects, and other relevant data.</li>
<li>Network communication: The server-side code manages communication between the game clients and the server. This includes receiving input from clients, updating the game state, and sending updates back to clients.</li>
<li>Anti-cheat measures: The server-side code is responsible for preventing cheating and ensuring that all players are playing the game fairly. This can include things like detecting and preventing aimbots, wallhacks, and other types of cheating.</li>
<li>Load balancing: In games with a large number of players, the server-side code may need to manage load balancing to ensure that the game can handle the traffic from all players.</li>
<li>Authentication and authorization: The server-side code may need to manage authentication and authorization to ensure that only authorized players are able to access the game.</li>
<li>Persistence: The server-side code may need to persist data, such as player scores or game state, so that it can be used later, for example, to keep track of high scores.</li>
</ol>
<p>Overall, the server-side code is critical to the success of a multiplayer game, as it helps to ensure a smooth and fair gameplay experience for all players.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583"> var</span><span style="color:#E1E4E8"> express </span><span style="color:#F97583">=</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'express'</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// Express contains some boilerplate to for routing and such</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> app </span><span style="color:#F97583">=</span><span style="color:#B392F0"> express</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">=</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'http'</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">Server</span><span style="color:#E1E4E8">(app);</span></span>
<span class="line"><span style="color:#6A737D">// var io = require('socket.io')(http); // Here's where we include socket.io as a node module </span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> io </span><span style="color:#F97583">=</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'socket.io'</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">listen</span><span style="color:#E1E4E8">(http);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> https</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> require</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'https'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Serve the index page </span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">request</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">response</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  response.</span><span style="color:#B392F0">sendFile</span><span style="color:#E1E4E8">(__dirname </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '/index.html'</span><span style="color:#E1E4E8">); </span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Serve the icon</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/favicon.ico"</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">request</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">response</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  response.</span><span style="color:#B392F0">sendFile</span><span style="color:#E1E4E8">(__dirname </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '/favicon.ico'</span><span style="color:#E1E4E8">); </span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Serve the assets directory</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/assets'</span><span style="color:#E1E4E8">,express.</span><span style="color:#B392F0">static</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'assets'</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/assets/sound'</span><span style="color:#E1E4E8">,express.</span><span style="color:#B392F0">static</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/sound'</span><span style="color:#E1E4E8">))</span></span>
<span class="line"><span style="color:#6A737D">// load css and js folders</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/js'</span><span style="color:#E1E4E8">,express.</span><span style="color:#B392F0">static</span><span style="color:#E1E4E8">(__dirname </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '/js'</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">use</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/css'</span><span style="color:#E1E4E8">,express.</span><span style="color:#B392F0">static</span><span style="color:#E1E4E8">(__dirname </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '/css'</span><span style="color:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Listen on port 8000</span></span>
<span class="line"><span style="color:#E1E4E8">app.</span><span style="color:#B392F0">set</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'port'</span><span style="color:#E1E4E8">, (process.env.</span><span style="color:#79B8FF">PORT</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> 8000</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">http.</span><span style="color:#B392F0">listen</span><span style="color:#E1E4E8">(app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'port'</span><span style="color:#E1E4E8">), </span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'listening on port'</span><span style="color:#E1E4E8">,app.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'port'</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">  https.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'https://table-scrapper.herokuapp.com/'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Hit the simple bot "server"</span></span>
<span class="line"><span style="color:#6A737D">// app.listen(process.env.PORT || 8000);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> players </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {}; </span><span style="color:#6A737D">//Keeps a table of all players, the key is the socket id</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> bullet_array </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []; </span><span style="color:#6A737D">// Keeps track of all the bullets to update them on the server </span></span>
<span class="line"><span style="color:#6A737D">// Tell Socket.io to start accepting connections</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> spawnObjectsAllowed </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// check if the server is allowed to spawn health packs and driftwood</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> maxHealthPacks </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">;	</span><span style="color:#6A737D">//there will up to 5 health packs scattered across the map at any given time</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> numHealthPacks </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;	</span><span style="color:#6A737D">// number of health packs current on the server</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> healthPack_array </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> maxDriftWood </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 15</span><span style="color:#E1E4E8">;	</span><span style="color:#6A737D">//there will only be 15 drift wood (obstacles) scattered across the map at any given time</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> numDriftWood </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// number of drift wood in the server</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> driftWood_array </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#79B8FF"> WORLD_SIZE</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {w:</span><span style="color:#79B8FF">1500</span><span style="color:#E1E4E8">,h:</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">}; </span><span style="color:#6A737D">//same as the client-side world size</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">io.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'connection'</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">socket</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">	// Listen for a new player trying to connect</span></span>
<span class="line"><span style="color:#E1E4E8">	socket.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'new-player'</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">state</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">		console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"New player joined with state:"</span><span style="color:#E1E4E8">,state);</span></span>
<span class="line"><span style="color:#E1E4E8">		players[socket.id] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> state;</span></span>
<span class="line"><span style="color:#6A737D">		// Broadcast a signal to everyone containing the updated players list</span></span>
<span class="line"><span style="color:#E1E4E8">		io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'update-players'</span><span style="color:#E1E4E8">,players);</span></span>
<span class="line"><span style="color:#E1E4E8">		spawnObjectsAllowed </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// now that a player has connected, allow the server to spawn healthpacks</span></span>
<span class="line"><span style="color:#E1E4E8">	})</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // Listen for a disconnection and update our player table </span></span>
<span class="line"><span style="color:#E1E4E8">  socket.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'disconnect'</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">state</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    delete</span><span style="color:#E1E4E8"> players[socket.id];</span></span>
<span class="line"><span style="color:#E1E4E8">	console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Player disconnected with state: "</span><span style="color:#E1E4E8">,state);</span></span>
<span class="line"><span style="color:#E1E4E8">    io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'update-players'</span><span style="color:#E1E4E8">,players);</span></span>
<span class="line"><span style="color:#E1E4E8">  }) </span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // Listen for move events and tell all other clients that something has moved </span></span>
<span class="line"><span style="color:#E1E4E8">  socket.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'move-player'</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">position_data</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(players[socket.id] </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// Happens if the server restarts and a client is still connected </span></span>
<span class="line"><span style="color:#E1E4E8">    players[socket.id].x </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> position_data.x;  </span></span>
<span class="line"><span style="color:#E1E4E8">    players[socket.id].y </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> position_data.y; </span></span>
<span class="line"><span style="color:#E1E4E8">    players[socket.id].angle </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> position_data.angle; </span></span>
<span class="line"><span style="color:#E1E4E8">	players[socket.id].health </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> position_data.health; </span><span style="color:#6A737D">// change sprites based on health</span></span>
<span class="line"><span style="color:#E1E4E8">    io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'update-players'</span><span style="color:#E1E4E8">,players);</span></span>
<span class="line"><span style="color:#E1E4E8">  })</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#6A737D">  // Listen for shoot-bullet events and add it to our bullet array</span></span>
<span class="line"><span style="color:#E1E4E8">  socket.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'shoot-bullet'</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">function</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(players[socket.id] </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> new_bullet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> data;</span></span>
<span class="line"><span style="color:#E1E4E8">    data.owner_id </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> socket.id; </span><span style="color:#6A737D">// Attach id of the player to the bullet </span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(Math.</span><span style="color:#B392F0">abs</span><span style="color:#E1E4E8">(data.speed_x) </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 20</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">abs</span><span style="color:#E1E4E8">(data.speed_y) </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 20</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">      // console.log("Player",socket.id,"is cheating!");</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    bullet_array.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(new_bullet);</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span></code></pre>
<p>The code block you have provided is the server-side code for a networked game implemented using Phaser and Node.js. The server is built using the Express framework and socket.io for real-time communication. The server has several endpoints for serving the client-side assets such as HTML, CSS, and JS files.</p>
<p>The <code>io.on('connection', function(socket){})</code> block is where the server listens for incoming connections from clients. The <code>socket</code> parameter represents the client’s socket, which is used to communicate with the client. The server handles several events such as <code>new-player</code>, <code>disconnect</code>, <code>move-player</code>, and <code>shoot-bullet</code>.</p>
<p>When a new player connects to the server, the <code>new-player</code> event is triggered. The player’s state is added to the <code>players</code> object with the <code>socket.id</code> as the key. The server then sends an <code>update-players</code> event to all connected clients, which includes the updated <code>players</code> object.</p>
<p>When a player disconnects from the server, the <code>disconnect</code> event is triggered. The player is removed from the <code>players</code> object, and the server sends an <code>update-players</code> event to all connected clients.</p>
<p>The <code>move-player</code> event is triggered when a player moves their character. The player’s position, angle, and health are updated in the <code>players</code> object. The server then sends an <code>update-players</code> event to all connected clients.</p>
<p>The <code>shoot-bullet</code> event is triggered when a player shoots a bullet. The bullet’s data, such as position and speed, are added to the <code>bullet_array</code>. The <code>owner_id</code> property of the bullet is set to the <code>socket.id</code> of the player who shot it. This property is used to identify which player’s bullet hit another player.</p>
<p>The server also has some variables to keep track of the health packs and driftwood objects in the game. The <code>maxHealthPacks</code> and <code>maxDriftWood</code> variables represent the maximum number of health packs and driftwood objects that can exist in the game. The <code>numHealthPacks</code> and <code>numDriftWood</code> variables represent the current number of health packs and driftwood objects in the game. The <code>healthPack_array</code> and <code>driftWood_array</code> arrays are used to store the health packs and driftwood objects’ position data.</p>
<p>Finally, the server sets up a listener on the specified port number and listens for incoming requests. When the server starts up, it sends a GET request to another URL using the <code>https.get()</code> method. This is useful for keeping the server alive on a platform like Heroku, which puts apps to sleep after a certain amount of inactivity.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583"> function</span><span style="color:#B392F0"> ServerGameLoop</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#F97583">  for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">bullet_array.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> bullet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> bullet_array[i];</span></span>
<span class="line"><span style="color:#E1E4E8">    bullet.x </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> bullet.speed_x; </span></span>
<span class="line"><span style="color:#E1E4E8">    bullet.y </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> bullet.speed_y; </span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Check if this bullet is close enough to hit any player </span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> players){</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8">(bullet.owner_id </span><span style="color:#F97583">!=</span><span style="color:#E1E4E8"> id){</span></span>
<span class="line"><span style="color:#6A737D">        // And your own bullet shouldn't kill you</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> players[id].x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.x; </span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> players[id].y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.y;</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dist </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">sqrt</span><span style="color:#E1E4E8">(dx </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dy);</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(dist </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 70</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">          io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'player-hit'</span><span style="color:#E1E4E8">,id); </span><span style="color:#6A737D">// Tell everyone this player got hit</span></span>
<span class="line"><span style="color:#E1E4E8">		  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Player: ["</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> "], hit by bullet </span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">"</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> players[id]);</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#6A737D">	  // Check if a player is colliding with another player</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// check if a bullet collides with a heart if so destroy it</span></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> j</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;j</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">healthPack_array.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">;j</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> healthPack_array[j].x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.x; </span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> healthPack_array[j].y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.y;</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dist </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">sqrt</span><span style="color:#E1E4E8">(dx </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dy);</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(dist </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 40</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">          //io.emit('player-hit',id); // Tell everyone this player got hit</span></span>
<span class="line"><span style="color:#E1E4E8">		  healthPack_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(j,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		  j</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">		  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Heart number ['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '] destroyed by bullet'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		  numHealthPacks</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#6A737D">	// Check if a bullet is colliding with driftwood</span></span>
<span class="line"><span style="color:#F97583">	for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> j</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;j</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">driftWood_array.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">;j</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">        // And your own bullet shouldn't kill you</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> driftWood_array[j].x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.x; </span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> driftWood_array[j].y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> bullet.y;</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dist </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">sqrt</span><span style="color:#E1E4E8">(dx </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dy);</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(dist </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 40</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">          //io.emit('player-hit',id); // Tell everyone this player got hit</span></span>
<span class="line"><span style="color:#E1E4E8">		  driftWood_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(j,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		  j</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">		  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'DriftWood number ['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '] destroyed by bullet ['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ']'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		  numDriftWood</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">	// consider allowing the player to destroy driftwood, maybe if this doesn't take too long</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">    // Remove the bullet if goes too far off screen </span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(bullet.x </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> bullet.x </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1500</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> bullet.y </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> bullet.y </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1000</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">        bullet_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(i,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Bullet ['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '] destroyed because it went offscreen ('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> bullet.x </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ','</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> bullet.y </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ')'</span><span style="color:#E1E4E8"> );</span></span>
<span class="line"><span style="color:#E1E4E8">        i</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // check if players collide with hearts</span></span>
<span class="line"><span style="color:#F97583">  for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">healthPack_array.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> healthPack </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> healthPack_array[i];</span></span>
<span class="line"><span style="color:#E1E4E8">    healthPack.x </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> healthPack.speed_x; </span></span>
<span class="line"><span style="color:#E1E4E8">    healthPack.y </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> healthPack.speed_y; </span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Check if this bullet is close enough to hit any player </span></span>
<span class="line"><span style="color:#6A737D">	// consider spawning "dead" ships that are shipwrecked later.</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> players){</span></span>
<span class="line"><span style="color:#6A737D">        // And your own bullet shouldn't kill you</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> players[id].x </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> healthPack.x; </span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> players[id].y </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> healthPack.y;</span></span>
<span class="line"><span style="color:#F97583">        var</span><span style="color:#E1E4E8"> dist </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">sqrt</span><span style="color:#E1E4E8">(dx </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dx </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> dy </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> dy);</span></span>
<span class="line"><span style="color:#6A737D">		// adjust distance based on what will be the final distance between player and ships</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(dist </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 40</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">          //io.emit('player-hit',id); // Tell everyone this player got hit</span></span>
<span class="line"><span style="color:#E1E4E8">		  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Collision between player['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> '], healthPack['</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ']'</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">		  healthPack_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(i,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		  i</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">		  numHealthPacks</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">		  // inform player that health is restored</span></span>
<span class="line"><span style="color:#E1E4E8">		  io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'player-heal'</span><span style="color:#E1E4E8">,id); </span><span style="color:#6A737D">// Tell everyone this player got hit</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#6A737D">	  // Check if a player is colliding with another player</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    // Remove if it goes too far off screen</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(healthPack.x </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> healthPack.x </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1500</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> healthPack.y </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> healthPack.y </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1000</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">        healthPack_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(i,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'HealthPack('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ') destroyed, out of bounds. ('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> healthPack.x </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ','</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> healthPack.y </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ')'</span><span style="color:#E1E4E8"> );</span></span>
<span class="line"><span style="color:#E1E4E8">        i</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">		numHealthPacks</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // update the driftwood locations on the server </span></span>
<span class="line"><span style="color:#F97583">  for</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> i</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">driftWood_array.</span><span style="color:#79B8FF">length</span><span style="color:#E1E4E8">;i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> driftWood </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> driftWood_array[i];</span></span>
<span class="line"><span style="color:#E1E4E8">    driftWood.x </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> driftWood.speed_x; </span></span>
<span class="line"><span style="color:#E1E4E8">    driftWood.y </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> driftWood.speed_y; </span></span>
<span class="line"><span style="color:#E1E4E8">	driftWood.rotation </span><span style="color:#F97583">+=</span><span style="color:#E1E4E8"> driftWood.rotateDirection</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">Math.</span><span style="color:#79B8FF">PI</span><span style="color:#F97583"> /</span><span style="color:#79B8FF"> 200</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	if</span><span style="color:#E1E4E8">(driftWood.rotation </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 2</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">Math.</span><span style="color:#79B8FF">PI</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">		driftWood.rotation </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#6A737D">	//console.log(driftWood.rotation)</span></span>
<span class="line"><span style="color:#6A737D">	// Remove the driftwood if goes too far off screen </span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">(driftWood.x </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> driftWood.x </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1500</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> driftWood.y </span><span style="color:#F97583">&#x3C;</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">10</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> driftWood.y </span><span style="color:#F97583">></span><span style="color:#79B8FF"> 1000</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">		numDriftWood</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        driftWood_array.</span><span style="color:#B392F0">splice</span><span style="color:#E1E4E8">(i,</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'driftWood('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ') destroyed, out of bounds. ('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> driftWood.x </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ','</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> driftWood.y </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ')'</span><span style="color:#E1E4E8"> );</span></span>
<span class="line"><span style="color:#E1E4E8">        i</span><span style="color:#F97583">--</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#6A737D">  // Tell everyone where the driftwood is:</span></span>
<span class="line"><span style="color:#E1E4E8">  io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"driftWood-update"</span><span style="color:#E1E4E8">,driftWood_array);</span></span>
<span class="line"><span style="color:#6A737D">  // Tell everyone where all the health packs are by sending the whole array</span></span>
<span class="line"><span style="color:#E1E4E8">  io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"healthPack-update"</span><span style="color:#E1E4E8">,healthPack_array);</span></span>
<span class="line"><span style="color:#6A737D">  // Tell everyone where all the bullets are by sending the whole array</span></span>
<span class="line"><span style="color:#E1E4E8">  io.</span><span style="color:#B392F0">emit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"bullets-update"</span><span style="color:#E1E4E8">,bullet_array);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span></span></code></pre>
<p>This is a game loop function that implements the game logic for a multi-player game. The game involves players controlling a ship, and they can shoot bullets and collide with other players’ ships. The game also has hearts that players can collide with to heal themselves and drifting wood that they can collide with or destroy.</p>
<p>The function updates the position of bullets, checks if they collide with any players, hearts, or drifting wood, and removes them if they go off-screen. The function also updates the position of hearts and removes them if they go off-screen. It updates the position and rotation of drifting wood, removes them if they go off-screen, and sends the current positions to all the players.</p>
<p>The following are the changes that can be made to the game:</p>
<ol>
<li>Add a limit to the number of bullets a player can shoot at a time to prevent spamming.</li>
<li>Add a timer that delays the player’s shooting after firing a bullet to prevent rapid firing.</li>
<li>Modify the collision distance between a player and a heart or drifting wood to prevent the player from colliding when the objects are far away.</li>
<li>Add a feature to allow players to destroy drifting wood.</li>
<li>Add a limit to the number of hearts on the screen at a time to prevent spamming.</li>
<li>Add a limit to the number of drifting wood on the screen at a time to prevent spamming.</li>
<li>Add a timer that spawns a new heart or drifting wood after a fixed time interval.</li>
<li>Add a score system to the game to keep track of the player’s progress. The score can be increased when a player hits another player or destroys drifting wood. The score can be decreased when a player collides with another player or a drifting wood.</li>
<li>Add a feature that allows players to upgrade their ship’s speed, bullet speed, or health by colliding with special objects.</li>
<li>Add a feature that allows players to select their ship’s type, each with different stats such as speed, bullet speed, and health.</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D"> // spawn hearts that restore 10 hp when player collides</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> spawnHealthPacks</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#6A737D">  // Spawn Health Packs for players</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (numHealthPacks </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> maxHealthPacks </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> spawnObjectsAllowed </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">	  // spawn health pack</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> plusOrMinusx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 0.5</span><span style="color:#F97583"> ?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> plusOrMinusy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 0.5</span><span style="color:#F97583"> ?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> new_healthPack </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {x:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 0.75</span><span style="color:#F97583">*</span><span style="color:#79B8FF">WORLD_SIZE</span><span style="color:#E1E4E8">.w</span><span style="color:#F97583">+</span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8">,y:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.75</span><span style="color:#F97583">*</span><span style="color:#79B8FF">WORLD_SIZE</span><span style="color:#E1E4E8">.h</span><span style="color:#F97583">+</span><span style="color:#79B8FF">25</span><span style="color:#E1E4E8">,speed_x:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.5</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">plusOrMinusx,speed_y:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.5</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">plusOrMinusy};</span></span>
<span class="line"><span style="color:#E1E4E8">	  healthPack_array.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(new_healthPack);</span></span>
<span class="line"><span style="color:#E1E4E8">	  numHealthPacks</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">	  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Spawning Health Pack ('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> new_healthPack.x </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ','</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> new_healthPack.y </span><span style="color:#F97583">+</span><span style="color:#9ECBFF">')'</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> numHealthPacks);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> spawnDriftWood</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#6A737D">  // Spawn DriftWood as obstacles players</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (numDriftWood </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> maxDriftWood </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> spawnObjectsAllowed </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">	  // spawn health pack</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> plusOrMinusx </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 0.5</span><span style="color:#F97583"> ?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> plusOrMinusy </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 0.5</span><span style="color:#F97583"> ?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> rotateDir </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 0.5</span><span style="color:#F97583"> ?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">	  var</span><span style="color:#E1E4E8"> new_driftWood </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {x:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 0.75</span><span style="color:#F97583">*</span><span style="color:#79B8FF">WORLD_SIZE</span><span style="color:#E1E4E8">.w</span><span style="color:#F97583">+</span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8">,y:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.75</span><span style="color:#F97583">*</span><span style="color:#79B8FF">WORLD_SIZE</span><span style="color:#E1E4E8">.h</span><span style="color:#F97583">+</span><span style="color:#79B8FF">25</span><span style="color:#E1E4E8">,speed_x:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.5</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">plusOrMinusx,speed_y:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">0.5</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">plusOrMinusy,rotation:Math.</span><span style="color:#B392F0">random</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">*</span><span style="color:#79B8FF">2</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">Math.</span><span style="color:#79B8FF">PI</span><span style="color:#E1E4E8">,rotateDirection:rotateDir};</span></span>
<span class="line"><span style="color:#E1E4E8">	  driftWood_array.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(new_driftWood);</span></span>
<span class="line"><span style="color:#E1E4E8">	  numDriftWood</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">	  </span></span>
<span class="line"><span style="color:#E1E4E8">	  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Spawning DriftWood ('</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> new_driftWood.x </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ','</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> new_driftWood.y </span><span style="color:#F97583">+</span><span style="color:#9ECBFF">')'</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> new_driftWood.rotation);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// spawn health packs every 3 seconds</span></span>
<span class="line"><span style="color:#B392F0">setInterval</span><span style="color:#E1E4E8">(spawnDriftWood, </span><span style="color:#79B8FF">3000</span><span style="color:#E1E4E8">); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// spawn health packs every 5 seconds</span></span>
<span class="line"><span style="color:#B392F0">setInterval</span><span style="color:#E1E4E8">(spawnHealthPacks, </span><span style="color:#79B8FF">5000</span><span style="color:#E1E4E8">); </span></span>
<span class="line"><span style="color:#6A737D">// 0.064 seconds update</span></span>
<span class="line"><span style="color:#B392F0">setInterval</span><span style="color:#E1E4E8">(ServerGameLoop, </span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// spawn bots</span></span>
<span class="line"><span style="color:#B392F0"> setInterval</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		https.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'https://table-scrapper.herokuapp.com/'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Attempting to ping other server'</span><span style="color:#E1E4E8">); </span></span></code></pre>
<p>This code seems to be part of a game server that spawns health packs, driftwood obstacles, and bots. The <code>spawnHealthPacks</code> function spawns a heart-shaped health pack that restores 10 health points to a player when they collide with it. The <code>spawnDriftWood</code> function spawns driftwood obstacles that players must avoid. Both of these functions use a <code>setInterval</code> function to spawn the objects at regular intervals.</p>
<p>The code also includes a <code>ServerGameLoop</code> function that updates the game state every 0.064 seconds, and a <code>setInterval</code> function that calls this function at that interval.</p>
<p>Finally, the code includes another <code>setInterval</code> function that pings another server every 5 seconds. This may be used to keep the game server alive or to communicate with other game servers.</p>
<p>In a multiplayer game, client-side code is responsible for managing many aspects of the game experience for the individual player. Some of the things that client-side code has to manage include:</p>
<ol>
<li>Displaying graphics and game elements: Client-side code must handle the rendering of game graphics, animations, and other visual elements on the player’s device.</li>
<li>User input: Client-side code is responsible for handling user input, such as mouse clicks, keyboard presses, and other actions that the player takes in the game.</li>
<li>Local game state: The client-side code maintains a local version of the game state, which includes information such as the player’s position, health, inventory, and other game data.</li>
<li>Network communication: The client-side code communicates with the game server to send and receive data about the game state, other players’ positions, and other relevant information.</li>
<li>Predictive movement: The client-side code may also use predictive movement algorithms to anticipate the movements of other players and provide a smoother, more seamless game experience for the player.</li>
<li>Game logic: The client-side code may also perform some game logic, such as collision detection, physics calculations, and other game mechanics. However, the server ultimately has the final say in these matters, as it is responsible for enforcing the game rules and resolving any conflicts that arise.</li>
</ol>
<p>Socket.IO is a JavaScript library that enables real-time, bidirectional and event-based communication between the browser and the server. It uses websockets, a protocol that provides a persistent connection between a client and server, allowing for real-time data transfer. With Socket.IO, developers can build applications that allow for real-time chat, gaming, or other collaborative experiences.</p>
<p>Socket.IO provides both a client-side and server-side API, making it easy to build real-time web applications with Node.js. The library is designed to work with any web framework, and it has a number of features that make it ideal for building multiplayer games or applications that require real-time communication. For example, Socket.IO supports broadcasting messages to multiple clients, room-based communication, and reconnection in case of lost connections.</p>
<p>Socket.IO is a JavaScript library that enables real-time, bidirectional and event-based communication between the browser and the server. It uses websockets, a protocol that provides a persistent connection between a client and server, allowing for real-time data transfer. With Socket.IO, developers can build applications that allow for real-time chat, gaming, or other collaborative experiences.</p>
<p>Socket.IO provides both a client-side and server-side API, making it easy to build real-time web applications with Node.js. The library is designed to work with any web framework, and it has a number of features that make it ideal for building multiplayer games or applications that require real-time communication. For example, Socket.IO supports broadcasting messages to multiple clients, room-based communication, and reconnection in case of lost connections.</p>
<p>In the next part will we cover the front-end portion of the app, it leverages socket.io</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/FriendlyUser/Pirates-Game/tree/master">https://github.com/FriendlyUser/Pirates-Game/tree/master</a></li>
</ul> </content></div></div></div></div> <div class="mx-auto max-w-screen-lg px-3 py-6"> <div class="no-print flex w-full"> <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form> <div class="ml-3 max-w-lg bg-slate-300"> <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script> <div id="search" class="ml-3 p-4"></div> <script type="module">window.addEventListener("DOMContentLoaded",e=>{setTimeout(()=>{new PagefindUI({element:"#search"})},2e3)});</script> </div> </div> </div>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2026<!-- --> by <!-- -->FriendlyUsers Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2026-02-26<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div> </body></html>