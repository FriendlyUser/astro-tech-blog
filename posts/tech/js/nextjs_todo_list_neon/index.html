<!DOCTYPE html><html lang="en"><head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>How to create a todolist application using nextjs and neon serverless postgres - Astro Tech Blog</title><meta name="description" content="Describes a Next.js project that uses a PostgreSQL database to manage to-do items."><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><link rel="stylesheet" href="/_astro/index.fe829d41.css" />
<style type="text/css">@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.d5e551f8.js"></script></head><body class="bg-slate-900 text-gray-100"><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div><div data-pagefind-body><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">How to create a todolist application using nextjs and neon serverless postgres</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Friday, 16 March 2023 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-red-400 text-red-900"> <a href="/tags/react" style="padding-right:3px"> <category>react<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/js" style="padding-right:3px"> <category>js<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-w-3 aspect-h-2"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/neon_article.jpeg" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content><h1 id="overview">Overview</h1>
<p>The Next.js Todo List app is a single-page application, which means that it only has one page. This page is served by the Next.js server, which also handles all of the API requests. The app uses Next API functions to handle the API requests, and Neon Serverless Postgres for the database.</p>
<p>The Next.js server is a Node.js server that is used to serve the Next.js app. It also handles all of the API requests. The Next.js server uses Next API functions to handle the API requests. Next API functions are a way to write API routes in Next.js. They are easy to use and they make it easy to write reusable API code.</p>
<p>Neon Serverless Postgres is a serverless database that is hosted on Vercel. It is a great choice for Next.js apps because it is easy to use and it is very scalable. Neon Serverless Postgres is also very affordable.</p>
<h2 id="frontend">Frontend</h2>
<p>The key parts of the following Next.js ”/” route are:</p>
<ul>
<li>The use of the <code>useSWR</code> hook to fetch data from an API.</li>
<li>The use of the <code>useState</code> hook to manage the state of the application, such as the text of the new to-do item and the search text.</li>
<li>The use of the <code>useEffect</code> hook to fetch data from the API when the page loads or when the search text changes.</li>
<li>The use of the <code>handleAddTodoItem</code> function to add a new to-do item to the list.</li>
<li>The use of the <code>handleCheckboxChange</code> function to toggle the completion status of a to-do item.</li>
<li>The use of the <code>handleDeleteAllTasksClick</code> function to delete all to-do items from the list.</li>
</ul>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> React, { useState, useEffect } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'react'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  AppBar,</span></span>
<span class="line"><span style="color: #F8F8F2">  Toolbar,</span></span>
<span class="line"><span style="color: #F8F8F2">  Typography,</span></span>
<span class="line"><span style="color: #F8F8F2">  Button,</span></span>
<span class="line"><span style="color: #F8F8F2">  TextField,</span></span>
<span class="line"><span style="color: #F8F8F2">  Grid,</span></span>
<span class="line"><span style="color: #F8F8F2">  Paper,</span></span>
<span class="line"><span style="color: #F8F8F2">  Checkbox,</span></span>
<span class="line"><span style="color: #F8F8F2">  FormControlLabel,</span></span>
<span class="line"><span style="color: #F8F8F2">  IconButton,</span></span>
<span class="line"><span style="color: #F8F8F2">  Box,</span></span>
<span class="line"><span style="color: #F8F8F2">} </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@mui/material'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> DeleteIcon </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@mui/icons-material/Delete'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> Accordion </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@mui/material/Accordion'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> useSWR, { useSWRConfig } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'swr'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> classes </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'./index.module.css'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> maxTodoListItems </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">10</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">interface</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">TodoItem</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  id</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">string</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">  text</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">string</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">  completed</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">boolean</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">App</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> () </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> [todoItemText, setTodoItemText] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">useState</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">''</span><span style="color: #F8F8F2">); </span><span style="color: #88846F">// text of the new to-do item [controlled component</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> [searchText, setSearchText] </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">useState</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">''</span><span style="color: #F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { mutate } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">useSWRConfig</span><span style="color: #F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> completeKey </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">`/api/search?completed=true&#x26;size=</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">maxTodoListItems</span><span style="color: #F92672">}${</span><span style="color: #F8F8F2">searchText </span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">`&#x26;search=</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">searchText</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">""</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> incompleteKey </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">`/api/search?completed=false</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">searchText </span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">`&#x26;search=</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">searchText</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">""</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetchResults</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> (</span><span style="color: #FD971F; font-style: italic">url</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">string</span><span style="color: #F8F8F2">)</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">Promise</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; text-decoration: underline">TodoItem</span><span style="color: #F8F8F2">[]> </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetch</span><span style="color: #F8F8F2">(url)</span></span>
<span class="line"><span style="color: #F8F8F2">    .</span><span style="color: #A6E22E">then</span><span style="color: #F8F8F2">((</span><span style="color: #FD971F; font-style: italic">res</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2">  {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// Handle HTTP errors</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">!</span><span style="color: #F8F8F2">res.ok) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">throw</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">Error</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'Failed to fetch tasks'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> res.</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">()</span></span>
<span class="line"><span style="color: #F8F8F2">    })</span></span>
<span class="line"><span style="color: #F8F8F2">    .</span><span style="color: #A6E22E">then</span><span style="color: #F8F8F2">((</span><span style="color: #FD971F; font-style: italic">data</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">TodoItem</span><span style="color: #F8F8F2">[]) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">!</span><span style="color: #F8F8F2">data) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> [];</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// sort by text field</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> sorted </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> data.</span><span style="color: #A6E22E">sort</span><span style="color: #F8F8F2">((</span><span style="color: #FD971F; font-style: italic">a</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">b</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> textA </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> a?.text?.</span><span style="color: #A6E22E">toUpperCase</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> textB </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> b?.text?.</span><span style="color: #A6E22E">toUpperCase</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (textA </span><span style="color: #F92672">&#x3C;</span><span style="color: #F8F8F2"> textB) {</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">-</span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (textA </span><span style="color: #F92672">></span><span style="color: #F8F8F2"> textB) {</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">      });</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> sorted;</span></span>
<span class="line"><span style="color: #F8F8F2">    });</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// refresh every 60 seconds automatically</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> fetcherOptions </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    refreshInterval: </span><span style="color: #AE81FF">1000</span><span style="color: #F92672">*</span><span style="color: #AE81FF">60</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { data: incompleteResults </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [] } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">useSWR</span><span style="color: #F8F8F2">(incompleteKey, fetchResults, fetcherOptions)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { data: completeResults </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> []} </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">useSWR</span><span style="color: #F8F8F2">(completeKey, fetchResults, fetcherOptions)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleAddTodoItem</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> () </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> response </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetch</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'/api/todo'</span><span style="color: #F8F8F2">, {</span></span>
<span class="line"><span style="color: #F8F8F2">        method: </span><span style="color: #E6DB74">'POST'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        headers: {</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #E6DB74">'Content-Type'</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">'application/json'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        },</span></span>
<span class="line"><span style="color: #F8F8F2">        body: JSON.</span><span style="color: #A6E22E">stringify</span><span style="color: #F8F8F2">({ </span></span>
<span class="line"><span style="color: #F8F8F2">          text: todoItemText,</span></span>
<span class="line"><span style="color: #F8F8F2">          completed: </span><span style="color: #AE81FF">false</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        }),</span></span>
<span class="line"><span style="color: #F8F8F2">      });</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">!</span><span style="color: #F8F8F2">response.ok) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">throw</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">Error</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'Failed to add task'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(incompleteKey);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(completeKey);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">setTodoItemText</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">''</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">    } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">      console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// Handle the error, such as displaying an error message to the user or retrying the request</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">  };</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleSearchTextChange</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> (</span><span style="color: #FD971F; font-style: italic">event</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">any</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #A6E22E">setSearchText</span><span style="color: #F8F8F2">(event.target.value);</span></span>
<span class="line"><span style="color: #F8F8F2">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleCheckboxChange</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> (</span><span style="color: #FD971F; font-style: italic">event</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">any</span><span style="color: #F8F8F2">, </span><span style="color: #FD971F; font-style: italic">id</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">string</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { checked } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> event.target;</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> response </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetch</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">`/api/todo?id=</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">id</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">, {</span></span>
<span class="line"><span style="color: #F8F8F2">        method: </span><span style="color: #E6DB74">'PUT'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        headers: {</span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #E6DB74">'Content-Type'</span><span style="color: #F8F8F2">: </span><span style="color: #E6DB74">'application/json'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">        },</span></span>
<span class="line"><span style="color: #F8F8F2">        body: JSON.</span><span style="color: #A6E22E">stringify</span><span style="color: #F8F8F2">({ completed: checked }),</span></span>
<span class="line"><span style="color: #F8F8F2">      });</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">!</span><span style="color: #F8F8F2">response.ok) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">throw</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">Error</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'Failed to update task'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(incompleteKey);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(completeKey);</span></span>
<span class="line"><span style="color: #F8F8F2">    } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">      console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// Handle the error, such as displaying an error message to the user or retrying the request</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleDeleteAllTasksClick</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> () </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> response </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">fetch</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'/api/todo'</span><span style="color: #F8F8F2">, {</span></span>
<span class="line"><span style="color: #F8F8F2">        method: </span><span style="color: #E6DB74">'DELETE'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">      });</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (</span><span style="color: #F92672">!</span><span style="color: #F8F8F2">response.ok) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">throw</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">Error</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'Failed to delete tasks'</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(incompleteKey);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #A6E22E">mutate</span><span style="color: #F8F8F2">(completeKey);</span></span>
<span class="line"><span style="color: #F8F8F2">    } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">      console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// Handle the error, such as displaying an error message to the user or retrying the request</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"><span style="color: #F8F8F2">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">return</span><span style="color: #F8F8F2"> (</span></span>
<span class="line"><span style="color: #F8F8F2">    &#x3C;></span></span>
<span class="line"><span style="color: #F8F8F2">    &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.root</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;</span><span style="color: #66D9EF; font-style: italic">Box</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sx</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">{ flexGrow: </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2"> }</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">        &#x3C;</span><span style="color: #66D9EF; font-style: italic">AppBar</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">position</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"static"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.appBar</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #66D9EF; font-style: italic">Toolbar</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.toolbar</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;</span><span style="color: #66D9EF; font-style: italic">Typography</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">variant</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"h6"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.title</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sx</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">{ mr: </span><span style="color: #AE81FF">2</span><span style="color: #F8F8F2"> }</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              Todo List</span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Typography</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;</span><span style="color: #66D9EF; font-style: italic">Typography</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">variant</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"h6"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">color</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"inherit"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">component</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"div"</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.deleteButton</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">onClick</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">handleDeleteAllTasksClick</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">                &#x3C;</span><span style="color: #66D9EF; font-style: italic">DeleteIcon</span><span style="color: #F8F8F2"> /> Delete all tasks</span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Typography</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Toolbar</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">        &#x3C;/</span><span style="color: #66D9EF; font-style: italic">AppBar</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Box</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;</span><span style="color: #F92672">br</span><span style="color: #F8F8F2"> /></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;</span><span style="color: #F92672">br</span><span style="color: #F8F8F2"> /></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.mainWrapper</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">        &#x3C;</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">container</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">spacing</span><span style="color: #F92672">={</span><span style="color: #AE81FF">3</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">item</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">xs</span><span style="color: #F92672">={</span><span style="color: #AE81FF">12</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sm</span><span style="color: #F92672">={</span><span style="color: #AE81FF">6</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;</span><span style="color: #66D9EF; font-style: italic">Paper</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.paper</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.form</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">                &#x3C;</span><span style="color: #66D9EF; font-style: italic">TextField</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">label</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"Add new task"</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">variant</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"outlined"</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">fullWidth</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">required</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">value</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">todoItemText</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">onChange</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">event</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">setTodoItemText</span><span style="color: #F8F8F2">(event.target.value)</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                /></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Paper</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #F92672">br</span><span style="color: #F8F8F2"> /></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #66D9EF; font-style: italic">Button</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">type</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"button"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">variant</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"contained"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">color</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"primary"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">disabled</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">todoItemText </span><span style="color: #F92672">===</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">""</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">onClick</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">() </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">handleAddTodoItem</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">              }</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">                  Add</span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Button</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">item</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">xs</span><span style="color: #F92672">={</span><span style="color: #AE81FF">12</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sm</span><span style="color: #F92672">={</span><span style="color: #AE81FF">6</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;</span><span style="color: #66D9EF; font-style: italic">Paper</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.paper</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #66D9EF; font-style: italic">TextField</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">label</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"Search tasks"</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">variant</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"outlined"</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">fullWidth</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.search</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">value</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">searchText</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                </span><span style="color: #A6E22E">onChange</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">handleSearchTextChange</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">              /></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Paper</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">item</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">xs</span><span style="color: #F92672">={</span><span style="color: #AE81FF">12</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sm</span><span style="color: #F92672">={</span><span style="color: #AE81FF">6</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            &#x3C;</span><span style="color: #F92672">h2</span><span style="color: #F8F8F2">>Todo Items&#x3C;/</span><span style="color: #F92672">h2</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            </span><span style="color: #F92672">{</span><span style="color: #F8F8F2">incompleteResults?.</span><span style="color: #A6E22E">map</span><span style="color: #F8F8F2">((</span><span style="color: #FD971F; font-style: italic">item</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> (</span></span>
<span class="line"><span style="color: #F8F8F2">                &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">key</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.id</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">                  &#x3C;</span><span style="color: #66D9EF; font-style: italic">FormControlLabel</span></span>
<span class="line"><span style="color: #F8F8F2">                    </span><span style="color: #A6E22E">control</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF; font-style: italic">Checkbox</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">checked</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.completed</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">onChange</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">event</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleCheckboxChange</span><span style="color: #F8F8F2">(event, item.id)</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">name</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"checked"</span><span style="color: #F8F8F2"> /></span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                    </span><span style="color: #A6E22E">label</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.text</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                    </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.checkbox</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                  /></span></span>
<span class="line"><span style="color: #F8F8F2">                &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            ))</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">item</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">xs</span><span style="color: #F92672">={</span><span style="color: #AE81FF">12</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">sm</span><span style="color: #F92672">={</span><span style="color: #AE81FF">6</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;</span><span style="color: #F92672">h2</span><span style="color: #F8F8F2">>Finished Items&#x3C;/</span><span style="color: #F92672">h2</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">          </span><span style="color: #F92672">{</span><span style="color: #F8F8F2">completeResults?.</span><span style="color: #A6E22E">map</span><span style="color: #F8F8F2">((</span><span style="color: #FD971F; font-style: italic">item</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> (</span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;</span><span style="color: #F92672">div</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">key</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.id</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">                &#x3C;</span><span style="color: #66D9EF; font-style: italic">FormControlLabel</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">control</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #66D9EF; font-style: italic">Checkbox</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">checked</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.completed</span><span style="color: #F92672">}</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">name</span><span style="color: #F92672">=</span><span style="color: #E6DB74">"checked"</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">onChange</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">(</span><span style="color: #FD971F; font-style: italic">event</span><span style="color: #F8F8F2">) </span><span style="color: #66D9EF; font-style: italic">=></span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handleCheckboxChange</span><span style="color: #F8F8F2">(event, item.id)</span><span style="color: #F92672">}</span><span style="color: #F8F8F2">  /></span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">label</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">item.text</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #88846F">// disabled</span></span>
<span class="line"><span style="color: #F8F8F2">                  </span><span style="color: #A6E22E">className</span><span style="color: #F92672">={</span><span style="color: #F8F8F2">classes.checkbox</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">                /></span></span>
<span class="line"><span style="color: #F8F8F2">              &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">            ))</span><span style="color: #F92672">}</span></span>
<span class="line"><span style="color: #F8F8F2">          &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">        &#x3C;/</span><span style="color: #66D9EF; font-style: italic">Grid</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">      &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">    &#x3C;/</span><span style="color: #F92672">div</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">    &#x3C;/></span></span>
<span class="line"><span style="color: #F8F8F2">  );</span></span>
<span class="line"><span style="color: #F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">export</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">default</span><span style="color: #F8F8F2"> App;</span></span></code></pre>
<p>The <code>useSWR</code> hook is a React hook that makes it easy to fetch data from an API and update the state of your application when the data changes. The <code>useState</code> hook is a React hook that makes it easy to manage the state of your application, such as the text of the new to-do item and the search text. The <code>useEffect</code> hook is a React hook that makes it easy to run code when the page loads or when certain events occur, such as when the search text changes. The <code>handleAddTodoItem</code> function is a function that adds a new to-do item to the list. The <code>handleCheckboxChange</code> function is a function that toggles the completion status of a to-do item. The <code>handleDeleteAllTasksClick</code> function is a function that deletes all to-do items from the list.</p>
<p>Here are the UI elements used in the code you provided:</p>
<ul>
<li>AppBar: This is a toolbar that is displayed at the top of the page. It contains the title of the application and a button to delete all tasks.</li>
<li>Toolbar: This is a container for the AppBar’s contents.</li>
<li>Typography: This is a React component that renders text with different styles.</li>
<li>Button: This is a React component that renders a button.</li>
<li>TextField: This is a React component that renders a text input field.</li>
<li>Grid: This is a React component that lays out its children in a grid.</li>
<li>Paper: This is a React component that renders a paper-like container.</li>
<li>Checkbox: This is a React component that renders a checkbox.</li>
<li>FormControlLabel: This is a React component that renders a label and a checkbox together.</li>
<li>IconButton: This is a React component that renders a button with an icon.</li>
<li>Box: This is a React component that renders a box.</li>
</ul>
<p>The state management for useSWR works as follows:</p>
<p>When the useSWR hook is first called, it fetches the data from the API and stores it in the state.
If the data changes, the useSWR hook will fetch the new data from the API and update the state.
The state is then used to render the UI.
For example, when the search text changes, the useSWR hook will fetch the new data from the API and update the state. The state is then used to render the list of tasks, which will now be filtered by the new search text.</p>
<p>The TodoList app makes three API calls:</p>
<ul>
<li>A GET request to <code>/api/search</code> with the query parameters <code>completed</code> and <code>size</code> to get a list of tasks.</li>
<li>A POST request to <code>/api/todo</code> to add a new task.</li>
<li>PUT /api/todo with the task ID and the new completed value to update a task.</li>
</ul>
<p>The <code>/api/search</code> endpoint takes two query parameters:</p>
<ul>
<li><code>completed</code> - A boolean value indicating whether the tasks should be completed or not.</li>
<li><code>size</code> - The number of tasks to return.</li>
</ul>
<p>The <code>/api/todo</code>endpoint with a <code>POST</code> request takes a JSON object with the following properties:</p>
<ul>
<li><code>text</code> - The text of the task.</li>
<li><code>completed</code> - A boolean value indicating whether the task is completed or not.</li>
</ul>
<p>The PUT call is made by the handleCheckboxChange function when the user checks or unchecks a checkbox. The function makes a request to the /api/todo endpoint with the task ID and the new completed value.</p>
<p>The TodoList app also uses the <code>useSWR</code> hook to cache the results of the <code>/api/search</code> endpoint. This means that the app will only make a request to the server if the cache is expired or if the query parameters have changed.</p>
<h2 id="backend-api-routes">Backend (API Routes)</h2>
<p>The API handler function for <code>search</code> that takes two parameters:</p>
<p>req: The request object, which contains information about the request, such as the query parameters and the body.
res: The response object, which is used to send the response back to the client.
The function first checks if the request is a GET request. If it is, the function parses the query parameters and builds a SQL query. The query is then executed against the database and the results are returned to the client.</p>
<p>If the request is not a GET request, the function returns an error message.</p>
<p>Here is a more detailed explanation of what each part of the code does:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #88846F">// Import the pool object from the utils/db file.</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> pool </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@/utils/db'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Import the ErrorMessage and TodoItem types from the utils/types file.</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> { ErrorMessage, TodoItem } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@/utils/types'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Import the NextApiRequest and NextApiResponse types from the next library.</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">type</span><span style="color: #F8F8F2"> { NextApiRequest, NextApiResponse } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'next'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Define the Data type, which can either be an array of TodoItem objects or an ErrorMessage object.</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">type</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">Data</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">TodoItem</span><span style="color: #F8F8F2">[] </span><span style="color: #F92672">|</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">ErrorMessage</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Export the default handler function.</span></span>
<span class="line"><span style="color: #F92672">export</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">default</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">function</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handler</span><span style="color: #F8F8F2">(</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The request object.</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FD971F; font-style: italic">req</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">NextApiRequest</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The response object.</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FD971F; font-style: italic">res</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">NextApiResponse</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; text-decoration: underline">Data</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// Try to execute the request.</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Get the number of arguments that have been passed to the query.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">let</span><span style="color: #F8F8F2"> numArgs </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">1</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Get the query parameters.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { search, completed, size } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.query;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Build the SQL query.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">let</span><span style="color: #F8F8F2"> query </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'SELECT * FROM todo WHERE'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Create an array to store the values that will be used in the query.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> values </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// If the search parameter is not empty, add a condition to the query that matches the search term.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (search) {</span></span>
<span class="line"><span style="color: #F8F8F2">      query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">` text ILIKE $</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">numArgs</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">      values.</span><span style="color: #A6E22E">push</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">`%</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">search</span><span style="color: #F92672">}</span><span style="color: #E6DB74">%`</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      numArgs</span><span style="color: #F92672">++</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    } </span><span style="color: #F92672">else</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// If the search parameter is empty, add a condition that always evaluates to true.</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #88846F">// This is necessary because the WHERE clause must always have at least one condition.</span></span>
<span class="line"><span style="color: #F8F8F2">      query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">' 1=1'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// If the completed parameter is true, add a condition to the query that matches completed tasks.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (completed) {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (search) {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #88846F">// If the search parameter is not empty, add an AND operator to the query.</span></span>
<span class="line"><span style="color: #F8F8F2">        query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'  '</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">+</span><span style="color: #F8F8F2"> search </span><span style="color: #F92672">?</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">' AND'</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">''</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">` completed = $</span><span style="color: #F92672">${</span><span style="color: #F8F8F2">numArgs</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">      values.</span><span style="color: #A6E22E">push</span><span style="color: #F8F8F2">(completed);</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// If the size parameter is not empty, add a LIMIT clause to the query.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (size) {</span></span>
<span class="line"><span style="color: #F8F8F2">      query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">` LIMIT </span><span style="color: #F92672">${</span><span style="color: #F8F8F2">size</span><span style="color: #F92672">}</span><span style="color: #E6DB74">`</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Execute the query and get the results.</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { rows } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> pool.</span><span style="color: #A6E22E">query</span><span style="color: #F8F8F2">(query, values);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Send the results back to the client.</span></span>
<span class="line"><span style="color: #F8F8F2">    res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">200</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">(rows);</span></span>
<span class="line"><span style="color: #F8F8F2">  } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Log the error.</span></span>
<span class="line"><span style="color: #F8F8F2">    console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Send an error message back to the client.</span></span>
<span class="line"><span style="color: #F8F8F2">    res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">500</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">'Internal server error'</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<p>To connect to the neon database, you can use vercel integrations to do the heavy lifting.</p>
<p>This will add POSTGRES Environment Variables to your project, which you can use to connect to the database.</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #88846F">// Import the Pool class from the pg library.</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> { Pool } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'pg'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Create a new Pool object.</span></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> pool </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">new</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">Pool</span><span style="color: #F8F8F2">({</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The hostname of the database server.</span></span>
<span class="line"><span style="color: #F8F8F2">  host: process.env.PGHOST,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The username for the database connection.</span></span>
<span class="line"><span style="color: #F8F8F2">  user: process.env.PGUSER,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The name of the database to connect to.</span></span>
<span class="line"><span style="color: #F8F8F2">  database: process.env.PGDATABASE,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// The password for the database connection.</span></span>
<span class="line"><span style="color: #F8F8F2">  password: process.env.PGPASSWORD,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// An alternative way to specify the connection parameters.</span></span>
<span class="line"><span style="color: #F8F8F2">  connectionString: process.env.DATABASE_URL,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #88846F">// A configuration object for the SSL connection.</span></span>
<span class="line"><span style="color: #F8F8F2">  ssl: {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #88846F">// Do not reject unauthorized certificates.</span></span>
<span class="line"><span style="color: #F8F8F2">    rejectUnauthorized: </span><span style="color: #AE81FF">false</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">  },</span></span>
<span class="line"><span style="color: #F8F8F2">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #88846F">// Export the pool so that it can be used by other parts of the application.</span></span>
<span class="line"><span style="color: #F92672">export</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">default</span><span style="color: #F8F8F2"> pool;</span></span></code></pre>
<p>The <code>todo</code> API handler function that takes two parameters:</p>
<p>req: The request object, which contains information about the request, such as the query parameters and the body.
res: The response object, which is used to send the response back to the client.
The function first checks the request method. If the request method is GET, the function parses the query parameters and builds a SQL query. The query is then executed against the database and the results are returned to the client.</p>
<p>If the request method is POST, the function parses the request body and builds a SQL query. The query is then executed against the database and the new row is inserted.</p>
<p>If the request method is PUT, the function parses the request body and builds a SQL query. The query is then executed against the database and the existing row is updated.</p>
<p>If the request method is DELETE, the function parses the request body and builds a SQL query. The query is then executed against the database and the existing row is deleted.</p>
<p>If the request method is not supported, the function returns an error message.</p>
<p>Here is a more detailed explanation of what each part of the code does:</p>
<pre is:raw="" class="astro-code monokai" style="background-color: #272822; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> pool </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@/utils/db'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> { ErrorMessage, TodoItem } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'@/utils/types'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F92672">import</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">type</span><span style="color: #F8F8F2"> { NextApiRequest, NextApiResponse } </span><span style="color: #F92672">from</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'next'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #66D9EF; font-style: italic">type</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">Data</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">TodoItem</span><span style="color: #F8F8F2">[] </span><span style="color: #F92672">|</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">ErrorMessage</span><span style="color: #F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F92672">export</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">default</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">async</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">function</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E">handler</span><span style="color: #F8F8F2">(</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FD971F; font-style: italic">req</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">NextApiRequest</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FD971F; font-style: italic">res</span><span style="color: #F92672">:</span><span style="color: #F8F8F2"> </span><span style="color: #A6E22E; text-decoration: underline">NextApiResponse</span><span style="color: #F8F8F2">&#x3C;</span><span style="color: #A6E22E; text-decoration: underline">Data</span><span style="color: #F8F8F2">></span></span>
<span class="line"><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { method } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #F92672">switch</span><span style="color: #F8F8F2"> (method) {</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">case</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'GET'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { completed } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.query;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">let</span><span style="color: #F8F8F2"> query </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'SELECT * FROM todo'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> values </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [];</span></span>
<span class="line"><span style="color: #F8F8F2">    </span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (completed </span><span style="color: #F92672">!==</span><span style="color: #F8F8F2"> </span><span style="color: #AE81FF">undefined</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">          query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">' WHERE completed = $1'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">          values.</span><span style="color: #A6E22E">push</span><span style="color: #F8F8F2">(completed);</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">    </span></span>
<span class="line"><span style="color: #F8F8F2">        query </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">' ORDER BY id DESC'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { rows } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> pool.</span><span style="color: #A6E22E">query</span><span style="color: #F8F8F2">(query, values);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">200</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">(rows);</span></span>
<span class="line"><span style="color: #F8F8F2">      } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">        console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">500</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">'Internal Server Error'</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">break</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">case</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'POST'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { text, completed } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.body;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { rows } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> pool.</span><span style="color: #A6E22E">query</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'INSERT INTO todo (text, completed) VALUES ($1, $2) RETURNING id, text, completed'</span><span style="color: #F8F8F2">, [text, completed]);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">201</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">(rows[</span><span style="color: #AE81FF">0</span><span style="color: #F8F8F2">]);</span></span>
<span class="line"><span style="color: #F8F8F2">      } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">        console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">500</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">'Internal Server Error'</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">break</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">case</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'PUT'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { id } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.query;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { completed } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.body;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> data </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> pool.</span><span style="color: #A6E22E">query</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'UPDATE todo SET completed = $1 WHERE id = $2'</span><span style="color: #F8F8F2">, [ completed, id]);</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #88846F">// console.log("rows", data);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">200</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">(data </span><span style="color: #F92672">as</span><span style="color: #F8F8F2"> </span><span style="color: #66D9EF; font-style: italic">any</span><span style="color: #F8F8F2">);</span></span>
<span class="line"><span style="color: #F8F8F2">      } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">        console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">500</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">'Internal Server Error'</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">break</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">case</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'DELETE'</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">try</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">const</span><span style="color: #F8F8F2"> { id } </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> req.query;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">let</span><span style="color: #F8F8F2"> queryString </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">'DELETE FROM todo'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #66D9EF; font-style: italic">let</span><span style="color: #F8F8F2"> queryParams </span><span style="color: #F92672">=</span><span style="color: #F8F8F2"> [];</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">if</span><span style="color: #F8F8F2"> (id) {</span></span>
<span class="line"><span style="color: #F8F8F2">          queryString </span><span style="color: #F92672">+=</span><span style="color: #F8F8F2"> </span><span style="color: #E6DB74">' WHERE id = $1'</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">          queryParams.</span><span style="color: #A6E22E">push</span><span style="color: #F8F8F2">(id);</span></span>
<span class="line"><span style="color: #F8F8F2">        }</span></span>
<span class="line"><span style="color: #F8F8F2">        </span><span style="color: #F92672">await</span><span style="color: #F8F8F2"> pool.</span><span style="color: #A6E22E">query</span><span style="color: #F8F8F2">(queryString, queryParams);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">204</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">end</span><span style="color: #F8F8F2">();</span></span>
<span class="line"><span style="color: #F8F8F2">      } </span><span style="color: #F92672">catch</span><span style="color: #F8F8F2"> (error) {</span></span>
<span class="line"><span style="color: #F8F8F2">        console.</span><span style="color: #A6E22E">error</span><span style="color: #F8F8F2">(error);</span></span>
<span class="line"><span style="color: #F8F8F2">        res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">500</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">'Internal Server Error'</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">      }</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #F92672">break</span><span style="color: #F8F8F2">;</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F92672">default</span><span style="color: #F8F8F2">:</span></span>
<span class="line"><span style="color: #F8F8F2">      res.</span><span style="color: #A6E22E">setHeader</span><span style="color: #F8F8F2">(</span><span style="color: #E6DB74">'Allow'</span><span style="color: #F8F8F2">, [</span><span style="color: #E6DB74">'GET'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">'POST'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">'PUT'</span><span style="color: #F8F8F2">, </span><span style="color: #E6DB74">'DELETE'</span><span style="color: #F8F8F2">]);</span></span>
<span class="line"><span style="color: #F8F8F2">      res.</span><span style="color: #A6E22E">status</span><span style="color: #F8F8F2">(</span><span style="color: #AE81FF">405</span><span style="color: #F8F8F2">).</span><span style="color: #A6E22E">json</span><span style="color: #F8F8F2">({ message: </span><span style="color: #E6DB74">`Method </span><span style="color: #F92672">${</span><span style="color: #F8F8F2">method</span><span style="color: #F92672">}</span><span style="color: #E6DB74"> Not Allowed`</span><span style="color: #F8F8F2"> });</span></span>
<span class="line"><span style="color: #F8F8F2">  }</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<p>The Next.js Todo List app is a great example of how to use Next.js, Next API functions, and Neon Serverless Postgres to build a simple and scalable web application.</p>
<p>Deployed to <a href="https://todonextjs-six.vercel.app">https://todonextjs-six.vercel.app</a></p>
<h2 id="references">References:</h2>
<ul>
<li><a href="https://github.com/FriendlyUser/todonextjs">https://github.com/FriendlyUser/todonextjs</a></li>
</ul></content></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print flex w-full"><form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form><div class="ml-3 max-w-lg bg-slate-300"><link href="/_pagefind/pagefind-ui.css" rel="stylesheet"><script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script><div id="search" class="ml-3 p-4"></div></div></div></div></div><div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2023<!-- --> by <!-- -->Astro Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2023-11-23<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div></body></html>