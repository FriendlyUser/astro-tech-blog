<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Tracking files with a smart contract - FriendlyUsers Tech Blog</title><meta name="description" content="react native template for a basic app"><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="module">(function(e,n,r,t,m){e[t]=e[t]||[],e[t].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s="";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-K8P5P8FQ");</script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","UA-119155027-6");</script><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.BvkiO192.css">
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts" target="_self">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog" target="_self">GitHub</a></li></ul></nav></div></div> <div data-pagefind-body>  <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Tracking files with a smart contract</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Saturday, 2 June 2023 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/solidity" style="padding-right:3px"> <category>solidity<!-- --> </category></a></span></div> <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/dapp" style="padding-right:3px"> <category>dapp<!-- --> </category></a></span></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/DALL·E 2022-12-26 21.10.41 - decentralized network diagram simple bobble heads.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content> <h2 id="smart-contracts">Smart Contracts</h2>
<p>This Solidity contract is a simple file list that stores information about files that are uploaded to it. It uses a struct called File to store each file’s information, which includes a unique ID, the file’s IPFS hash, the file’s name, an array of tags, the owner’s address, and a timestamp.</p>
<p>The contract has a mapping called files, which maps an address (the owner’s address) to an array of File structs. It also has another mapping called lastIds, which stores the last ID used for each owner’s File array.</p>
<p>The contract has two events: fileAdded and tagsAdded. The fileAdded event is triggered when a new file is added to the list, and it includes the file’s ID, IPFS hash, and name as parameters. The tagsAdded event is triggered when tags are added to a file, and it includes the file’s tags as a parameter.</p>
<p>The contract has two public functions: addFile and getFileTags. The addFile function allows a user to add a new file to the list by providing the file’s IPFS hash, name, and tags. It stores the new file in the files mapping and increments the lastIds value for the owner. The getFileTags function allows a user to retrieve the tags for a specific file by providing the owner’s address and the file’s index in the owner’s File array. It returns the file’s tags as an array of bytes32 values.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#F97583">pragma</span><span style="color:#85E89D"> solidity</span><span style="color:#79B8FF"> ^0.4.24</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">contract</span><span style="color:#B392F0"> FileList</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">   struct</span><span style="color:#B392F0"> File</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">      uint256</span><span style="color:#E1E4E8"> id;</span></span>
<span class="line"><span style="color:#79B8FF">      string</span><span style="color:#E1E4E8"> ipfshash;</span></span>
<span class="line"><span style="color:#79B8FF">      bytes32</span><span style="color:#E1E4E8"> filename;</span></span>
<span class="line"><span style="color:#79B8FF">      bytes32</span><span style="color:#E1E4E8">[</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">] tags;</span></span>
<span class="line"><span style="color:#79B8FF">      address</span><span style="color:#E1E4E8"> owner;</span></span>
<span class="line"><span style="color:#79B8FF">      uint256</span><span style="color:#E1E4E8"> timestamp;</span></span>
<span class="line"><span style="color:#E1E4E8">   }</span></span>
<span class="line"><span style="color:#79B8FF">   uint256</span><span style="color:#F97583"> public</span><span style="color:#F97583"> constant</span><span style="color:#E1E4E8"> maxAmountOfFiles </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1000</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">   // Owner => files</span></span>
<span class="line"><span style="color:#F97583">   mapping</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> File[maxAmountOfFiles]) </span><span style="color:#F97583">public</span><span style="color:#E1E4E8"> files;</span></span>
<span class="line"><span style="color:#6A737D">   // Owner => last files id</span></span>
<span class="line"><span style="color:#F97583">   mapping</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> =></span><span style="color:#79B8FF"> uint256</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">public</span><span style="color:#E1E4E8"> lastIds;</span></span>
<span class="line"><span style="color:#6A737D">   // consider mapping hash to set of tags</span></span>
<span class="line"><span style="color:#E1E4E8">   </span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> main event for smart contract, needed for drizzle to update list of files</span></span>
<span class="line"><span style="color:#F97583">   event</span><span style="color:#B392F0"> fileAdded</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">uint256</span><span style="color:#FFAB70"> fileid</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">string</span><span style="color:#FFAB70"> ipfshash</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> _filename</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">   event</span><span style="color:#B392F0"> tagsAdded</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">[</span><span style="color:#FFAB70">5</span><span style="color:#E1E4E8">] </span><span style="color:#FFAB70">tags</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> Add a file to the list</span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> ipfshash</span><span style="color:#6A737D"> an ipfshash returned after an image is finished uploaded</span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> _filename</span><span style="color:#6A737D"> name of file as a bytes32 as filenames should be short</span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> tags</span><span style="color:#6A737D"> array of bytes32 used for sorting/searching files (e,g. blockchain, school, textbook)</span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@notice</span><span style="color:#6A737D"> updates mappings todos and lastIds</span></span>
<span class="line"><span style="color:#F97583">   function</span><span style="color:#B392F0"> addFile</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">string</span><span style="color:#FFAB70"> ipfshash</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8"> _filename, </span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">[</span><span style="color:#FFAB70">5</span><span style="color:#E1E4E8">] </span><span style="color:#FFAB70">tags</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">public</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">      File </span><span style="color:#F97583">memory</span><span style="color:#E1E4E8"> myFile </span><span style="color:#F97583">=</span><span style="color:#B392F0"> File</span><span style="color:#E1E4E8">(lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">], ipfshash, _filename, tags,  </span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">now</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">      // explicitly store tags</span></span>
<span class="line"><span style="color:#E1E4E8">      myFile.tags </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> tags;</span></span>
<span class="line"><span style="color:#F97583">      emit</span><span style="color:#B392F0"> tagsAdded</span><span style="color:#E1E4E8"> (myFile.tags);</span></span>
<span class="line"><span style="color:#6A737D">      // store new file in mapping</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">      files[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">][lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">]] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> myFile;</span></span>
<span class="line"><span style="color:#6A737D">      // emit event, also need for drizzle</span></span>
<span class="line"><span style="color:#F97583">      emit</span><span style="color:#B392F0"> fileAdded</span><span style="color:#E1E4E8">(lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">],ipfshash,_filename);</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8">(lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">>=</span><span style="color:#E1E4E8"> maxAmountOfFiles) lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">      else</span><span style="color:#E1E4E8"> lastIds[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">   }</span></span>
<span class="line"><span style="color:#E1E4E8">   </span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> return the tags for a specific file </span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> owner</span><span style="color:#6A737D"> --- address of person who uploaded the file </span></span>
<span class="line"><span style="color:#6A737D">   /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> _index</span><span style="color:#6A737D"> --- the file desired, (first file uploaded, second , etc ...)</span></span>
<span class="line"><span style="color:#F97583">   function</span><span style="color:#B392F0"> getFileTags</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#FFAB70"> owner</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">uint256</span><span style="color:#E1E4E8"> _index) </span><span style="color:#F97583">external</span><span style="color:#F97583"> view</span><span style="color:#F97583"> returns</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">[</span><span style="color:#FFAB70">5</span><span style="color:#E1E4E8">]) {</span></span>
<span class="line"><span style="color:#F97583">       return</span><span style="color:#E1E4E8"> files[owner][_index].tags;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>This Solidity contract is an authentication contract that allows users to sign up, log in, update their information, and delete their accounts.</p>
<p>The contract has a struct called User that stores a user’s name and the timestamp of when the user was created. It has a mapping called users that maps an address (the user’s address) to a User struct. It also has an array called allUsers that stores the addresses of all users that have signed up.</p>
<p>The contract has four events: UserCreated, UserUpdated, UserDeleted, and UserLoggedIn. The UserCreated event is triggered when a new user is created and includes the user’s address, name, and creation timestamp as parameters. The UserUpdated event is triggered when a user updates their name and includes the user’s address and new name as parameters. The UserDeleted event is triggered when a user deletes their account and includes the user’s address as a parameter. The UserLoggedIn event is triggered when a user logs in and includes the user’s address as a parameter.</p>
<p>The contract has four public functions: login, signup, update, and destroy. The login function allows a user to log in to their account by returning their name. The signup function allows a user to create a new account by providing their name. It checks if the user already exists and, if not, creates a new user and stores it in the users mapping. The update function allows a user to update their name by providing a new name. It updates the user’s name in the users mapping. The destroy function allows a user to delete their account. It removes the user’s information from the users mapping and emits the UserDeleted event.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#F97583">pragma</span><span style="color:#85E89D"> solidity</span><span style="color:#79B8FF"> ^0.4.24</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/// </span><span style="color:#F97583">@author</span><span style="color:#6A737D"> David Li &#x3C;davidli012345@gmail.com></span></span>
<span class="line"><span style="color:#6A737D">/// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> basic authentication contract</span></span>
<span class="line"><span style="color:#6A737D">/// </span><span style="color:#F97583">@notice</span><span style="color:#6A737D"> tracks list of all users</span></span>
<span class="line"><span style="color:#F97583">contract</span><span style="color:#B392F0"> Authentication</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  struct</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    bytes32</span><span style="color:#E1E4E8"> name;</span></span>
<span class="line"><span style="color:#79B8FF">    uint256</span><span style="color:#E1E4E8"> created_at;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#F97583">  event</span><span style="color:#B392F0"> UserCreated</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> indexed</span><span style="color:#FFAB70"> _address</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> _name</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">uint256</span><span style="color:#FFAB70"> _created_at</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  event</span><span style="color:#B392F0"> UserUpdated</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> indexed</span><span style="color:#FFAB70"> _address</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> _name</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  event</span><span style="color:#B392F0"> UserDeleted</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> indexed</span><span style="color:#FFAB70"> _address</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // make info public???</span></span>
<span class="line"><span style="color:#F97583">  mapping</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">address</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> User) </span><span style="color:#F97583">private</span><span style="color:#E1E4E8"> users;</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  // public array that contains list of all users that have registered </span></span>
<span class="line"><span style="color:#79B8FF">  address</span><span style="color:#E1E4E8">[] </span><span style="color:#F97583">public</span><span style="color:#E1E4E8"> allUsers;</span></span>
<span class="line"><span style="color:#F97583">  modifier</span><span style="color:#B392F0"> onlyExistingUser</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Check if user exists or terminate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    require</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">(users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0x0</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#79B8FF">    _</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  modifier</span><span style="color:#B392F0"> onlyValidName</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> name</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // Only valid names allowed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    require</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">(name </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0x0</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#79B8FF">    _</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@return</span><span style="color:#E1E4E8"> username</span></span>
<span class="line"><span style="color:#F97583">  function</span><span style="color:#B392F0"> login</span><span style="color:#E1E4E8">() </span></span>
<span class="line"><span style="color:#F97583">  public</span></span>
<span class="line"><span style="color:#F97583">  view</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">  onlyExistingUser</span></span>
<span class="line"><span style="color:#F97583">  returns</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> name</span><span style="color:#6A737D"> the username to be created. </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> checks if user exists</span></span>
<span class="line"><span style="color:#6A737D">  /// If yes return user name </span></span>
<span class="line"><span style="color:#6A737D">  /// If no, check if name was sent </span></span>
<span class="line"><span style="color:#6A737D">  /// If yes, create and return user </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@return</span><span style="color:#E1E4E8"> username</span><span style="color:#6A737D"> of created user</span></span>
<span class="line"><span style="color:#F97583">  function</span><span style="color:#B392F0"> signup</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> name</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  public</span></span>
<span class="line"><span style="color:#F97583">  payable</span></span>
<span class="line"><span style="color:#B392F0">  onlyValidName</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">name</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  returns</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0x0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#E1E4E8">        users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> name;</span></span>
<span class="line"><span style="color:#E1E4E8">	    users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].created_at </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> now</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#E1E4E8">        allUsers.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        emit</span><span style="color:#B392F0"> UserCreated</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">,name,</span><span style="color:#79B8FF">now</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@param</span><span style="color:#E1E4E8"> name</span><span style="color:#6A737D"> updating username</span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> updating user name </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@return</span><span style="color:#E1E4E8"> updated</span><span style="color:#6A737D"> username </span></span>
<span class="line"><span style="color:#F97583">  function</span><span style="color:#B392F0"> update</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">bytes32</span><span style="color:#FFAB70"> name</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  public</span></span>
<span class="line"><span style="color:#F97583">  payable</span></span>
<span class="line"><span style="color:#B392F0">  onlyValidName</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">name</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#B392F0">  onlyExistingUser</span></span>
<span class="line"><span style="color:#F97583">  returns</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">bytes32</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // Update user name.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name </span><span style="color:#F97583">!=</span><span style="color:#79B8FF"> 0x0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#E1E4E8">        users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> name;</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#F97583">        emit</span><span style="color:#B392F0"> UserUpdated</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">,name);</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> (users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">].name);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#6A737D">  /// </span><span style="color:#F97583">@dev</span><span style="color:#6A737D"> destroy existing username </span></span>
<span class="line"><span style="color:#F97583">  function</span><span style="color:#B392F0"> destroy</span><span style="color:#E1E4E8"> () </span></span>
<span class="line"><span style="color:#F97583">  public</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">  onlyExistingUser</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    delete</span><span style="color:#E1E4E8"> users[</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#F97583">    emit</span><span style="color:#B392F0"> UserDeleted</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">msg.sender</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>This code is a part of a Drizzle-React application. It exports a component called HomeContainer, which is connected to the Drizzle store using the drizzleConnect function from the drizzle-react library. The drizzleConnect function takes a component (in this case, the Home component) and a function called mapStateToProps as arguments and returns a new component that is connected to the Drizzle store.</p>
<p>The mapStateToProps function maps the state of the Drizzle store (which includes the accounts, contracts, and drizzleStatus properties) to the props of the Home component. This allows the Home component to access the state of the Drizzle store and use it to display information about the Ethereum accounts and contracts in the application.</p>
<p>The HomeContainer component will be re-rendered whenever the state of the Drizzle store changes, which allows it to stay up-to-date with the latest information from the Ethereum network.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> Home </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './Home'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { drizzleConnect } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'drizzle-react'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// May still need this even with data function to refresh component on updates for this contract.</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> mapStateToProps</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> state</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    accounts: state.accounts,</span></span>
<span class="line"><span style="color:#E1E4E8">    contracts: state.contracts,</span></span>
<span class="line"><span style="color:#E1E4E8">    drizzleStatus: state.drizzleStatus</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> HomeContainer</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> drizzleConnect</span><span style="color:#E1E4E8">(Home, mapStateToProps)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> HomeContainer</span></span></code></pre>
<p>This code is a React component that displays a table of files stored in a Solidity contract. It receives the contract’s address and the owner’s address as props and uses them to retrieve information about the files from the contract.</p>
<p>The component uses the Drizzle context and the drizzle-react library to interact with the contract. It has a constructor function that initializes the component’s state and binds the contract’s methods and properties to the component. It also has a componentDidMount lifecycle method that is called when the component is mounted to the DOM. In this method, the component retrieves the last ID of the files stored in the contract for the owner’s address and uses a loop to retrieve information about each file. It then stores the file information in a table and updates the component’s state with the table.</p>
<p>The component has a timeConverter helper function that converts a Unix timestamp to a human-readable date and time string. It also has a loadTableRow function that generates a table row for a file by mapping the file’s information to table cells.</p>
<p>Finally, the component has a render method that generates the HTML for the component. It uses the loadTableRow function to generate a table row for each file in the table and displays the table to the user.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React, { Component } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'react'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { IPFSURL } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '../util/constants'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> EthAddress </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './EthAddress'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> ErrorBoundary </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './ErrorBoundary'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> FileTable</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Component</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /**</span></span>
<span class="line"><span style="color:#6A737D">     *</span></span>
<span class="line"><span style="color:#6A737D">     * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {props}</span><span style="color:#E1E4E8"> props</span><span style="color:#6A737D"> the standard props object in react</span></span>
<span class="line"><span style="color:#6A737D">     * </span><span style="color:#F97583">@param</span><span style="color:#B392F0"> {context}</span><span style="color:#E1E4E8"> context</span><span style="color:#6A737D"> the drizzle context object used to manage contract state</span></span>
<span class="line"><span style="color:#6A737D">     */</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">props</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">context</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    super</span><span style="color:#E1E4E8">(props, context)</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.drizzle </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.context.drizzle</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.web3 </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.props.web3</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.contracts </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.props.contracts</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.fileListAddress </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.fileArray </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.state </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      lastIds: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      table: [],</span></span>
<span class="line"><span style="color:#E1E4E8">      fileOwnerAddress: </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.props.fileOwnerAddress</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#B392F0">  componentDidMount</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#6A737D">    // consider using cacheCall to store the actual table, so that it updates</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods.</span><span style="color:#B392F0">lastIds</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.state.fileOwnerAddress).</span><span style="color:#B392F0">call</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">lastIds</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">setState</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">          lastIds: lastIds</span></span>
<span class="line"><span style="color:#E1E4E8">        })</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> table </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []</span></span>
<span class="line"><span style="color:#6A737D">    // looks like an struct within an array can't be stored so easily</span></span>
<span class="line"><span style="color:#6A737D">    // var tags = []</span></span>
<span class="line"><span style="color:#6A737D">    // improve error handling when zero files are added</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods.</span><span style="color:#B392F0">lastIds</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.state.fileOwnerAddress).</span><span style="color:#B392F0">call</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">lastIds</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">        // eslint-disable-line no-loop-func</span></span>
<span class="line"><span style="color:#F97583">        for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">let</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> lastIds; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">          this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods.</span><span style="color:#B392F0">files</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.state.fileOwnerAddress, i).</span><span style="color:#B392F0">call</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">            .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">fileItem</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">              // add file item to table, missing tags</span></span>
<span class="line"><span style="color:#E1E4E8">              fileItem.filename </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.drizzle.web3.utils.</span><span style="color:#B392F0">hexToUtf8</span><span style="color:#E1E4E8">(fileItem.filename)</span></span>
<span class="line"><span style="color:#E1E4E8">              fileItem.timestamp </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">timeConverter</span><span style="color:#E1E4E8">(fileItem.timestamp)</span></span>
<span class="line"><span style="color:#6A737D">              /** Can't return bytes from struct array, maybe split this into into another loop?. */</span></span>
<span class="line"><span style="color:#79B8FF">              this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods.</span><span style="color:#B392F0">getFileTags</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.state.fileOwnerAddress, i).</span><span style="color:#B392F0">call</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">                .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">tags</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">                  // console.log(tags)</span></span>
<span class="line"><span style="color:#6A737D">                  // convert all non 0 bytes tag fields to hex</span></span>
<span class="line"><span style="color:#F97583">                  for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> j </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; j </span><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8">; j</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">                    if</span><span style="color:#E1E4E8"> (tags[j] </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> '0x0000000000000000000000000000000000000000000000000000000000000000'</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">                      // console.log(tags[j])</span></span>
<span class="line"><span style="color:#E1E4E8">                      tags[j] </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.drizzle.web3.utils.</span><span style="color:#B392F0">hexToUtf8</span><span style="color:#E1E4E8">(tags[j])</span></span>
<span class="line"><span style="color:#E1E4E8">                    } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">                      // console.log(tags[j])</span></span>
<span class="line"><span style="color:#E1E4E8">                      tags[j] </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> 'N/A'</span></span>
<span class="line"><span style="color:#E1E4E8">                    }</span></span>
<span class="line"><span style="color:#E1E4E8">                  }</span></span>
<span class="line"><span style="color:#E1E4E8">                  fileItem.tags </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> tags</span></span>
<span class="line"><span style="color:#E1E4E8">                  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(tags)</span></span>
<span class="line"><span style="color:#E1E4E8">                })</span></span>
<span class="line"><span style="color:#6A737D">              // console.log(fileItem)</span></span>
<span class="line"><span style="color:#6A737D">              // add fileItem to table</span></span>
<span class="line"><span style="color:#E1E4E8">              table.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(fileItem)</span></span>
<span class="line"><span style="color:#E1E4E8">            })</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#6A737D">    // consider modification all timestamps (now => unix timestamp)</span></span>
<span class="line"><span style="color:#6A737D">    // also modify tags to shorter them to string</span></span>
<span class="line"><span style="color:#6A737D">    // so have another function cleanup table and then set this.fileArray</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.fileArray </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> table</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#B392F0">  timeConverter</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">unixTimeStamp</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> a </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Date</span><span style="color:#E1E4E8">(unixTimeStamp </span><span style="color:#F97583">*</span><span style="color:#79B8FF"> 1000</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> months </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">'Jan'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Feb'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Mar'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Apr'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'May'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Jun'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Jul'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Aug'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Sep'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Oct'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Nov'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Dec'</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> year </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> a.</span><span style="color:#B392F0">getFullYear</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> month </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> months[a.</span><span style="color:#B392F0">getMonth</span><span style="color:#E1E4E8">()]</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> date </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> a.</span><span style="color:#B392F0">getDate</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> hour </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> a.</span><span style="color:#B392F0">getHours</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> min </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> a.</span><span style="color:#B392F0">getMinutes</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> sec </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> a.</span><span style="color:#B392F0">getSeconds</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> time </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> date </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ' '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> month </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ' '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> year </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ' '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> hour </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ':'</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> min </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ':'</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> sec</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> time</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#B392F0">  loadTableRow</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">index</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.drizzle.contracts.FileList.methods.</span><span style="color:#B392F0">files</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.state.fileOwnerAddress, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">call</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">fileItem</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> fileItem</span></span>
<span class="line"><span style="color:#E1E4E8">      })</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  render</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#6A737D">    // See https://menubar.io/reactjs-tables</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'container'</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#79B8FF">ErrorBoundary</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">          &#x3C;</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">> Files Table &#x3C;/</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">          &#x3C;</span><span style="color:#85E89D">table</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'table'</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">thead</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">              &#x3C;</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">i</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'fas fa-file'</span><span style="color:#E1E4E8"> /> FileName&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">i</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'fas fa-user'</span><span style="color:#E1E4E8"> /> Owner Eth Address&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">abbr</span><span style="color:#B392F0"> title</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'Unique Identifier on the interplanetery file system'</span><span style="color:#E1E4E8">> &#x3C;</span><span style="color:#85E89D">i</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'fas fa-hashtag'</span><span style="color:#E1E4E8"> /> Ipfs Hash &#x3C;/</span><span style="color:#85E89D">abbr</span><span style="color:#E1E4E8">> &#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">abbr</span><span style="color:#B392F0"> title</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'Unix Timestamp'</span><span style="color:#E1E4E8">> &#x3C;</span><span style="color:#85E89D">i</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'fas fa-clock'</span><span style="color:#E1E4E8"> />  TimeStamp&#x3C;/</span><span style="color:#85E89D">abbr</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">i</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'fas fa-tag'</span><span style="color:#E1E4E8"> /> Tags&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">              &#x3C;/</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;/</span><span style="color:#85E89D">thead</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">tbody</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">              {</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.fileArray </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> undefined</span><span style="color:#F97583"> &#x26;&#x26;</span></span>
<span class="line"><span style="color:#79B8FF">                 this</span><span style="color:#E1E4E8">.fileArray.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">ipfsRow</span><span style="color:#F97583"> =></span></span>
<span class="line"><span style="color:#E1E4E8">                   &#x3C;</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#B392F0"> key</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{ipfsRow.filename}>{ipfsRow.filename}&#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                       &#x3C;</span><span style="color:#79B8FF">EthAddress</span></span>
<span class="line"><span style="color:#B392F0">                         address</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{ipfsRow.owner}</span></span>
<span class="line"><span style="color:#B392F0">                         visibleCharacters</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#79B8FF">12</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#B392F0">                         networkId</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.props.web3.networkId </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> undefined</span><span style="color:#F97583"> ?</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.props.web3.networkId}</span></span>
<span class="line"><span style="color:#B392F0">                         etherscan</span></span>
<span class="line"><span style="color:#E1E4E8">                       /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#79B8FF">IPFSURL</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> ipfsRow.ipfshash} </span><span style="color:#B392F0">target</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'_blank'</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                        View File &#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">>{ipfsRow.timestamp}&#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     {</span><span style="color:#6A737D">/** Return inputted Tags */</span></span>
<span class="line"><span style="color:#E1E4E8">                       (ipfsRow.tags </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> undefined</span><span style="color:#F97583"> &#x26;&#x26;</span><span style="color:#E1E4E8"> ipfsRow.tags.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> ></span><span style="color:#79B8FF"> 3</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">&#x26;&#x26;</span></span>
<span class="line"><span style="color:#E1E4E8">                       &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                         &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tags'</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                           &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tag is-success'</span><span style="color:#E1E4E8">>{ipfsRow.tags[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                           &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tag is-info'</span><span style="color:#E1E4E8">>{ipfsRow.tags[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                           &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tag is-danger'</span><span style="color:#E1E4E8">>{ipfsRow.tags[</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">]}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                           &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tag is-link'</span><span style="color:#E1E4E8">>{ipfsRow.tags[</span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">]}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                           &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'tag is-primary'</span><span style="color:#E1E4E8">>{ipfsRow.tags[</span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">]}&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                         &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                       &#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                     }</span></span>
<span class="line"><span style="color:#E1E4E8">                   &#x3C;/</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                 )}</span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;/</span><span style="color:#85E89D">tbody</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">          &#x3C;/</span><span style="color:#85E89D">table</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#79B8FF">ErrorBoundary</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    )</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre> </content></div></div></div></div> <div class="mx-auto max-w-screen-lg px-3 py-6"> <div class="no-print flex w-full"> <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form> <div class="ml-3 max-w-lg bg-slate-300"> <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script> <div id="search" class="ml-3 p-4"></div> <script type="module">window.addEventListener("DOMContentLoaded",e=>{setTimeout(()=>{new PagefindUI({element:"#search"})},2e3)});</script> </div> </div> </div>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2026<!-- --> by <!-- -->FriendlyUsers Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2026-02-26<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div> </body></html>