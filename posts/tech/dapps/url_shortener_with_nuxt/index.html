<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Url shortener with nuxt - FriendlyUsers Tech Blog</title><meta name="description" content="Using solidity to create a url shortener dapp."><meta name="author" content="David Li"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="module">(function(e,n,r,t,m){e[t]=e[t]||[],e[t].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s="";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-K8P5P8FQ");</script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","UA-119155027-6");</script><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.BvkiO192.css">
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>David&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts" target="_self">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/FriendlyUser/astro-tech-blog" target="_self">GitHub</a></li></ul></nav></div></div> <div data-pagefind-body>  <div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Url shortener with nuxt</h1><div class="mt-2 text-center text-sm text-gray-400">By <!-- -->David Li<!-- --> on <!-- -->Saturday, 20 June 2023 13:00:00 GMT</div><div class="flex place-content-center pt-2"><div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/solidity" style="padding-right:3px"> <category>solidity<!-- --> </category></a></span></div> <div class="
      // Layout //      Shape (Updated
      to match your               &quot;For&quot; snippet) // Typography inline-flex max-w-full items-center rounded-full
      px-2.5 py-0.5                      text-xs font-medium
      bg-cyan-400 text-cyan-900          // Dynamic Color
      h-fit
    " style="height:fit-content"><span class="line-clamp-2 break-words text-left"> <a href="/tags/dapp" style="padding-right:3px"> <category>dapp<!-- --> </category></a></span></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/3267094508_short_ruler_in_the_grass.png" loading="lazy"/></div><div class="prose prose-invert mt-8 prose-img:rounded-lg"><content> <p>This is a Solidity contract that defines a simple contract for creating and retrieving a “link” (a URL). The contract has three events: Log, LinkAdded, and LinkExists. The Log event is not used in the contract, so it will never be emitted. The LinkAdded event is emitted when a new link is created, and it includes the ID of the link and the URL. The LinkExists event is not a real event, but rather a modifier that is used to ensure that a link with the given ID exists before allowing certain functions to be called.</p>
<p>The contract has a struct called LinkTemplate which represents a link and has two fields: userAddress, the address of the user who created the link, and url, the URL of the link. The contract also has a mapping called linkMapping which maps link IDs to LinkTemplate structs. The lastLinkId variable is used to keep track of the last link ID that was used.</p>
<p>The contract has a constructor which sets the lastLinkId to 0. The createNewLink function is used to create a new link by adding a new entry to the linkMapping mapping with a new link ID and the LinkTemplate struct for the new link. The getLink function is used to retrieve the user address and URL of a given link ID by looking up the LinkTemplate struct in the linkMapping mapping. The linkExists modifier is used to ensure that the link with the given ID actually exists before allowing the getLink function to be called.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">pragma solidity </span><span style="color:#F97583">^</span><span style="color:#79B8FF">0.4</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">24</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">contract e0x {</span></span>
<span class="line"><span style="color:#E1E4E8">	event </span><span style="color:#B392F0">Log</span><span style="color:#E1E4E8">(string message);</span></span>
<span class="line"><span style="color:#E1E4E8">	event </span><span style="color:#B392F0">LinkAdded</span><span style="color:#E1E4E8">(uint linkId, string url);</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	struct LinkTemplate {</span></span>
<span class="line"><span style="color:#E1E4E8">		address userAddress;</span></span>
<span class="line"><span style="color:#E1E4E8">		string url;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	uint lastLinkId;</span></span>
<span class="line"><span style="color:#B392F0">	mapping</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">uint</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> LinkTemplate) public linkMapping;</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#B392F0">	constructor</span><span style="color:#E1E4E8">() public {</span></span>
<span class="line"><span style="color:#E1E4E8">		lastLinkId </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	function</span><span style="color:#B392F0"> createNewLink</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">string</span><span style="color:#FFAB70"> url</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">public</span><span style="color:#B392F0"> returns</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">uint</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">	    lastLinkId</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">		linkMapping[lastLinkId] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> LinkTemplate</span><span style="color:#E1E4E8">(msg.sender, url);</span></span>
<span class="line"><span style="color:#E1E4E8">		emit </span><span style="color:#B392F0">LinkAdded</span><span style="color:#E1E4E8">(lastLinkId, url);</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#E1E4E8"> lastLinkId;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	modifier </span><span style="color:#B392F0">linkExists</span><span style="color:#E1E4E8">(uint linkId) {</span></span>
<span class="line"><span style="color:#6A737D">	    //link with the given hash does not exist</span></span>
<span class="line"><span style="color:#F97583">		if</span><span style="color:#E1E4E8">(linkMapping[linkId].userAddress </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0x0000000000000000000000000000000000000000</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#B392F0">			revert</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">		}</span></span>
<span class="line"><span style="color:#E1E4E8">		_;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	function</span><span style="color:#B392F0"> getLink</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">uint</span><span style="color:#FFAB70"> linkId</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">linkExists</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">linkId</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">public</span><span style="color:#B392F0"> constant</span></span>
<span class="line"><span style="color:#B392F0">		returns</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#FFAB70">			address</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">			string</span></span>
<span class="line"><span style="color:#E1E4E8">		) {</span></span>
<span class="line"><span style="color:#E1E4E8">		    LinkTemplate memory link </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> linkMapping[linkId];</span></span>
<span class="line"><span style="color:#F97583">			return</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">				link.userAddress,</span></span>
<span class="line"><span style="color:#E1E4E8">			    link.url</span></span>
<span class="line"><span style="color:#E1E4E8">			);</span></span>
<span class="line"><span style="color:#E1E4E8">		}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>This is a Vue.js single-page application (SPA) that uses the Ethereum network and a smart contract to redirect the user to a URL. The contract is called EthUrl and it is located at a specific Ethereum address. The contract has an Application Binary Interface (ABI) which is used to interact with the contract’s functions. The contract is being used to retrieve the URL associated with a given ID.</p>
<p>The SPA has a single template with a div element containing a message and a Loader component that is displayed while the redirect is being processed. The Loader component is imported from another file.</p>
<p>The SPA has a single script that defines an exported default object with various properties. The mounted property is a hook that is called after the SPA is mounted to the DOM. It calls the initContract and redirect methods when the SPA is mounted. The initContract method is used to create a new random Ethereum wallet and connect it to the provider for the Ethereum network. The redirect method is used to retrieve the URL associated with the given ID using the getLink function of the EthUrl contract. If the ID is not provided or the getLink function fails, an error message is displayed.</p>
<p>The SPA also has a single style block that applies styles to the .loading-page class. This class is applied to the div element in the template and is used to style the loading page that is displayed while the redirect is being processed.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="vue"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"loading-page"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>Redirecting...&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">Loader</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> { ethers } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'ethers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> EthUrlABI </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '../store/EthUrlABI'</span></span>
<span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> Loader </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '~/components/Loader.vue'</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> address</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> '0xa40d4c7fb56635a8a2a4d47ab7975bdcda57ac2a'</span><span style="color:#6A737D"> // insert deployed EIP20 token address here</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> provider </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ethers.</span><span style="color:#B392F0">getDefaultProvider</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'kovan'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> wallet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ethers.Wallet.</span><span style="color:#B392F0">createRandom</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  wallet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> wallet.</span><span style="color:#B392F0">connect</span><span style="color:#E1E4E8">(provider);</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> contract </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> ethers.</span><span style="color:#B392F0">Contract</span><span style="color:#E1E4E8">(address, EthUrlABI, wallet);</span></span>
<span class="line"><span style="color:#F97583">  export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    head: {</span></span>
<span class="line"><span style="color:#E1E4E8">      title: </span><span style="color:#9ECBFF">'Url Redirect Page'</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">    components: {</span></span>
<span class="line"><span style="color:#E1E4E8">		  Loader</span></span>
<span class="line"><span style="color:#E1E4E8">	  },</span></span>
<span class="line"><span style="color:#B392F0">    mounted</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">initContract</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">redirect</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">    methods: {</span></span>
<span class="line"><span style="color:#B392F0">        initContract</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">          let</span><span style="color:#E1E4E8"> address </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "0xa40d4c7fb56635a8a2a4d47ab7975bdcda57ac2a"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">          let</span><span style="color:#E1E4E8"> abi </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> EthUrlABI</span></span>
<span class="line"><span style="color:#E1E4E8">          wallet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ethers.Wallet.</span><span style="color:#B392F0">createRandom</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">          wallet </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> wallet.</span><span style="color:#B392F0">connect</span><span style="color:#E1E4E8">(provider);</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#B392F0">        redirect</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#F97583">          var</span><span style="color:#E1E4E8"> id </span><span style="color:#F97583">=</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.$route.params.id </span></span>
<span class="line"><span style="color:#F97583">          if</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">id){</span></span>
<span class="line"><span style="color:#F97583">              return</span></span>
<span class="line"><span style="color:#E1E4E8">          }</span></span>
<span class="line"><span style="color:#E1E4E8">          contract.</span><span style="color:#B392F0">getLink</span><span style="color:#E1E4E8">(id).</span><span style="color:#B392F0">then</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">url</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">              window.location.href </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> url[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">];</span></span>
<span class="line"><span style="color:#E1E4E8">          })</span></span>
<span class="line"><span style="color:#E1E4E8">          .</span><span style="color:#B392F0">catch</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">error</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">              console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(error)</span></span>
<span class="line"><span style="color:#F97583">              return</span><span style="color:#E1E4E8"> window.</span><span style="color:#B392F0">alert</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"INVALID ID VALUE"</span><span style="color:#E1E4E8">,error); </span></span>
<span class="line"><span style="color:#E1E4E8">          }) </span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">	  }</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">style</span><span style="color:#B392F0"> scoped</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">.loading-page</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  position</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">fixed</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  top</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  left</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  width</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  height</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">100</span><span style="color:#F97583">%</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  background</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">rgba</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">255</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0.8</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#79B8FF">  text-align</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">center</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  padding-top</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">200</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  font-size</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">30</span><span style="color:#F97583">px</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">  font-family</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">sans-serif</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>For the main page to create new urls, we can use the following code:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="vue"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">section</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"container"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">app-logo</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"title"</span><span style="color:#E1E4E8">>nuxt-shortener&#x3C;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">h2</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"subtitle"</span><span style="color:#E1E4E8">>Shorten your Urls here&#x3C;/</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"card"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"row"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">				URL:</span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">input</span></span>
<span class="line"><span style="color:#B392F0">					class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"url-field"</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">					v-model</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">fullURL</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#B392F0">					title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"fullURL"</span></span>
<span class="line"><span style="color:#E1E4E8">					@</span><span style="color:#B392F0">change</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">validURL</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#E1E4E8">				/></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"addlink"</span><span style="color:#E1E4E8"> @</span><span style="color:#B392F0">click</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">shorten</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8"> :</span><span style="color:#B392F0">disabled</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">txnPending</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">>Send&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">Loader</span><span style="color:#B392F0"> v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">txnPending</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">				&#x3C;!-- Link to etherscan based on network, do later, for now hardcode etherscan.--></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">txnPending</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">>Transaction being made&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> target</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"_blank"</span><span style="color:#B392F0"> v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">txnPending</span><span style="color:#9ECBFF">"</span><span style="color:#B392F0"> v-bind</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.txnHashURL</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">>View on Etherscan&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">shortURL </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> null</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">>View at: &#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">				&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">shortURL </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> null</span><span style="color:#9ECBFF">"</span><span style="color:#B392F0"> v-bind</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.shortURL</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">>{{</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.shortURL}}&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">modal</span></span>
<span class="line"><span style="color:#B392F0">				v-show</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">isModalVisible</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#E1E4E8">				@</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">closeModal</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#B392F0">				v-bind</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#E1E4E8">modalTitle</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#B392F0">				v-bind</span><span style="color:#E1E4E8">:</span><span style="color:#B392F0">content</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.modalContent</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#E1E4E8">			/></span></span>
<span class="line"><span style="color:#E1E4E8">     	 &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">section</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">template</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>This is a template for a Vue.js component that includes a form for entering a URL and a button for shortening the URL. The form includes an input field for entering the URL and a Loader component that is displayed while a transaction is pending. When the user clicks the “Send” button, the shorten method is called. If a transaction is pending, the button is disabled and the Loader component is displayed.</p>
<p>The template also includes a modal component that can be displayed by setting the isModalVisible property to true. The modal has a title and content that are set using the modalTitle and modalContent properties, respectively. The modal has a close button that calls the closeModal method when clicked.</p>
<p>This is a script for a Vue.js component that interacts with an Ethereum smart contract to create shortened URLs. The component has several properties and methods that are used to manage the state of the component and interact with the contract.</p>
<p>The component has a data property that returns an object with several properties that are used to manage the state of the component. The fullURL property is a string that stores the user-entered URL. The urlValid property is a boolean that indicates whether the user-entered URL is valid. The shortURL property is a string that stores the shortened URL. The txnPending property is a boolean that indicates whether a transaction is pending. The txnHashURL property is a string that stores the URL for viewing the transaction on Etherscan. The isModalVisible, modalTitle, and modalContent properties are used to manage the modal component.</p>
<p>The component has a mounted hook that is called after the component is mounted to the DOM. It calls the detectWeb3, initContract, checkNetwork, and batchEvents methods. The detectWeb3 method is used to check for the presence of the Ethereum browser extension (e.g., MetaMask). The initContract method is used to create an instance of the EthUrl contract using the contract’s ABI and address. The checkNetwork method is used to check that the user is connected to the correct Ethereum network. The batchEvents method is used to listen for events emitted by the contract.</p>
<p>The component has several methods for interacting with the contract and managing the component’s state. The validURL method is used to validate the user-entered URL. The checkNetwork method is used to check that the user is connected to the correct Ethereum network. The shorten method is used to create a shortened URL using the createNewLink function of the EthUrl contract. The closeModal method is used to close the modal component. The showModal method is used to show the modal component.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;script></span></span>
<span class="line"><span>// add check web3 and other features to make that the application can be loaded, could use my old </span></span>
<span class="line"><span>// logic to check for network ids</span></span>
<span class="line"><span>import AppLogo from '~/components/AppLogo.vue'</span></span>
<span class="line"><span>import Loader from '~/components/Loader.vue'</span></span>
<span class="line"><span>import modal from '~/components/modal.vue'</span></span>
<span class="line"><span>import EthUrlABI from '~/store/EthUrlABI'</span></span>
<span class="line"><span>import {ethers} from 'ethers'</span></span>
<span class="line"><span>//import { Web3Provider } from 'ethers/providers';</span></span>
<span class="line"><span>let provider = ''  //= new ethers.providers.Web3Provider(web3.currentProvider);</span></span>
<span class="line"><span>let address = "0xa40d4c7fb56635a8a2a4d47ab7975bdcda57ac2a";</span></span>
<span class="line"><span>let contract //= new ethers.Contract(address, EthUrlABI, provider.getSigner());</span></span>
<span class="line"><span>export default {</span></span>
<span class="line"><span>	components: {</span></span>
<span class="line"><span>		AppLogo,</span></span>
<span class="line"><span>		modal,</span></span>
<span class="line"><span>		Loader</span></span>
<span class="line"><span>	},</span></span>
<span class="line"><span>	data() {</span></span>
<span class="line"><span>		return {</span></span>
<span class="line"><span>			fullURL: '',</span></span>
<span class="line"><span>			urlValid: false,</span></span>
<span class="line"><span>			shortURL: null,</span></span>
<span class="line"><span>			txnPending: false,</span></span>
<span class="line"><span>			txnHashURL: '',</span></span>
<span class="line"><span>			isModalVisible: false,</span></span>
<span class="line"><span>			modalTitle: null,</span></span>
<span class="line"><span>			modalContent: null</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	},</span></span>
<span class="line"><span>	mounted() {</span></span>
<span class="line"><span>		this.detectWeb3()</span></span>
<span class="line"><span>		this.initContract()</span></span>
<span class="line"><span>		this.checkNetwork()</span></span>
<span class="line"><span>		this.batchEvents(EthUrlABI, address)</span></span>
<span class="line"><span>	},</span></span>
<span class="line"><span>	methods: {</span></span>
<span class="line"><span>		validURL() {</span></span>
<span class="line"><span>			var re =/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;</span></span>
<span class="line"><span>			if(this.fullURL !== '') {</span></span>
<span class="line"><span>				this.urlValid = re.test(this.fullURL)</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>			console.log(re.test(this.fullURL))</span></span>
<span class="line"><span>			return re.test(this.fullURL)</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		checkNetwork() {</span></span>
<span class="line"><span>			console.log('CHECKING NETWORK');</span></span>
<span class="line"><span>			contract.getLink(1)</span></span>
<span class="line"><span>			.then((output) => {</span></span>
<span class="line"><span>				console.log('OUTPUT',output);</span></span>
<span class="line"><span>			})</span></span>
<span class="line"><span>			.catch((err) => {</span></span>
<span class="line"><span>				console.log('ERROR',err);</span></span>
<span class="line"><span>				console.log('Not logged into metamask, please relog and refresh.')</span></span>
<span class="line"><span>				this.modalTitle = 'Metamask Locked.'</span></span>
<span class="line"><span>				this.modalContent = 'Please login into metamask and refresh.'</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>			}); </span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		async detectWeb3() {</span></span>
<span class="line"><span>			console.log('stupid')</span></span>
<span class="line"><span>			if (window.ethereum) {</span></span>
<span class="line"><span>				window.web3 = new Web3(ethereum);</span></span>
<span class="line"><span>				try {</span></span>
<span class="line"><span>					// Request account access if needed</span></span>
<span class="line"><span>					await ethereum.enable();</span></span>
<span class="line"><span>					// Acccounts now exposed</span></span>
<span class="line"><span>					web3.eth.sendTransaction({/* ... */})</span></span>
<span class="line"><span>					// close any message that tells people to open metamask</span></span>
<span class="line"><span>					this.closeModal()</span></span>
<span class="line"><span>				} catch (error) {</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>			} else if (window.web3) {</span></span>
<span class="line"><span>				window.web3 = new Web3(web3.currentProvider);</span></span>
<span class="line"><span>				// Acccounts always exposed</span></span>
<span class="line"><span>				web3.eth.sendTransaction({/* ... */})</span></span>
<span class="line"><span>				// close any message that tells people to open metamask</span></span>
<span class="line"><span>				this.closeModal()</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>			// Non-dapp browsers...</span></span>
<span class="line"><span>			else {</span></span>
<span class="line"><span>				this.modalTitle = 'Non Dapp Browser Detected.'</span></span>
<span class="line"><span>				this.modalContent = 'Oops, looks like you need to install metamask. See https://metamask.io/.'</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>				console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		initContract() {</span></span>
<span class="line"><span>			provider = new ethers.providers.Web3Provider(web3.currentProvider);</span></span>
<span class="line"><span>			contract = new ethers.Contract(address, EthUrlABI, provider.getSigner());</span></span>
<span class="line"><span>    		console.log('e0x Contract Initiated');</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		batchEvents(abi, address) {</span></span>
<span class="line"><span>			//batch listening of events</span></span>
<span class="line"><span>			const MyContract = web3.eth.contract(EthUrlABI);</span></span>
<span class="line"><span>			const myContractInstance = MyContract.at(address);</span></span>
<span class="line"><span>			const events = myContractInstance.allEvents({event: 'LinkAdded', fromBlock: 0, toBlock: 'latest'});</span></span>
<span class="line"><span>			</span></span>
<span class="line"><span>			events.watch(function(error, result){</span></span>
<span class="line"><span>				console.log(result);</span></span>
<span class="line"><span>				//console.log(result.args.url, result.args.linkId.toNumber(), result.blockNumber, result.transactionHash);</span></span>
<span class="line"><span>				console.log(error,result)</span></span>
<span class="line"><span>				/*</span></span>
<span class="line"><span>				var shortUrl = '{0}/s?id={1}'.f(window.location.origin, result.args.linkId.toNumber());</span></span>
<span class="line"><span>				var shorterUrl = shortUrl.replace('https://','');</span></span>
<span class="line"><span>				var shorterUrl = shorterUrl.replace('http://','');</span></span>
<span class="line"><span>				var row = "\</span></span>
<span class="line"><span>					&#x3C;tr>\</span></span>
<span class="line"><span>						&#x3C;td>&#x3C;p class='smaller'>{0}&#x3C;/p>&#x3C;/td>\</span></span>
<span class="line"><span>						&#x3C;td style='min-width:133px'>&#x3C;a class='small' target='_blank' href='{1}'>&#x3C;strong>{2}&#x3C;/strong>&#x3C;/a>&#x3C;/td>\</span></span>
<span class="line"><span>						&#x3C;td>&#x3C;a target='_blank' href='https://ropsten.etherscan.io/block/{3}'>&#x3C;code>{3}&#x3C;/code>&#x3C;/a>&#x3C;/td>\</span></span>
<span class="line"><span>						&#x3C;td>&#x3C;a target='_blank' href='https://ropsten.etherscan.io/tx/{4}'>link&#x3C;/a>&#x3C;/td>\</span></span>
<span class="line"><span>					&#x3C;/tr>".f(result.args.url,shortUrl,shorterUrl,result.blockNumber,result.transactionHash);</span></span>
<span class="line"><span>					**/</span></span>
<span class="line"><span>					// console.log(row);</span></span>
<span class="line"><span>					// $("#tx-table").prepend(row);</span></span>
<span class="line"><span>			})</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		async shorten() {</span></span>
<span class="line"><span>			// this.detectWeb3();</span></span>
<span class="line"><span>			if(this.fullURL === ''){</span></span>
<span class="line"><span>				this.modalTitle = 'Url Empty'</span></span>
<span class="line"><span>				this.modalContent = 'Please enter in an url.'</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>				return </span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>			if(!this.validURL()){</span></span>
<span class="line"><span>				this.modalTitle = 'Url Invalid'</span></span>
<span class="line"><span>				this.modalContent = 'Please enter in a valid url.'</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>				return </span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>			try {</span></span>
<span class="line"><span>				const tx = await contract.createNewLink(this.fullURL)</span></span>
<span class="line"><span>				this.txnPending = true</span></span>
<span class="line"><span>				this.txnHashURL = 'https://kovan.etherscan.io/tx/' + tx.hash</span></span>
<span class="line"><span>			} catch(error) {</span></span>
<span class="line"><span>				this.modalTitle = 'Rejected Transaction'</span></span>
<span class="line"><span>				this.modalContent = 'Darn, did I mention making links is free.'</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>				console.log(error)</span></span>
<span class="line"><span>			}</span></span>
<span class="line"><span>			// add this functionality to vue dapp and ipfs dapp</span></span>
<span class="line"><span>			contract.on("LinkAdded", (linkId, linkUrl) => {</span></span>
<span class="line"><span>				if(linkUrl !== this.fullURL){</span></span>
<span class="line"><span>					console.log('NOT MY EVENT');</span></span>
<span class="line"><span>					return</span></span>
<span class="line"><span>				}</span></span>
<span class="line"><span>				var shortUrl = linkId.toNumber()</span></span>
<span class="line"><span>				// $("#info").prepend( "Short URL: &#x3C;a target='_blank' href='{0}'>{0}&#x3C;/a>&#x3C;br>".f(shortUrl) );</span></span>
<span class="line"><span>				console.log("EVENT LISTENER", shortUrl, linkId.toNumber(), linkUrl);</span></span>
<span class="line"><span>				this.modalTitle = 'Link Added!'</span></span>
<span class="line"><span>				const url = window.location.href + linkId</span></span>
<span class="line"><span>				this.modalContent = 'Congrats, your link is available at ' + url</span></span>
<span class="line"><span>				this.showModal()</span></span>
<span class="line"><span>				this.txnPending = false</span></span>
<span class="line"><span>				this.shortURL = url</span></span>
<span class="line"><span>    		})</span></span>
<span class="line"><span>		},</span></span>
<span class="line"><span>		showModal() {</span></span>
<span class="line"><span>        	this.isModalVisible = true;</span></span>
<span class="line"><span>      	},</span></span>
<span class="line"><span>		closeModal() {</span></span>
<span class="line"><span>			this.isModalVisible = false;</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>&#x3C;/script></span></span></code></pre>
<h2 id="references">References</h2>
<p>See <a href="https://github.com/FriendlyUser/nuxt-url-shorter">https://github.com/FriendlyUser/nuxt-url-shorter</a></p> </content></div></div></div></div> <div class="mx-auto max-w-screen-lg px-3 py-6"> <div class="no-print flex w-full"> <form class="max-w-lg" action="https://formspree.io/f/davidli012345@gmail.com" method="POST"><div class="-mx-3 mb-6 flex flex-wrap"><div class="mb-6 w-full px-3 md:mb-0 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-first-name">First Name</label><input class="mb-3 block w-full appearance-none rounded py-3 px-4 leading-tight text-gray-700 focus:bg-white focus:outline-none" id="grid-first-name" type="text" placeholder="Jane"/></div><div class="w-full px-3 md:w-1/2"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-last-name">Last Name</label><input class="block w-full appearance-none rounded border border-gray-200  py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="grid-last-name" type="text" placeholder="Doe"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">E-mail</label><input class="mb-3 block w-full appearance-none rounded border py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="email" type="email"/></div></div><div class="-mx-3 mb-6 flex flex-wrap"><div class="w-full px-3"><label class="mb-2 block text-xs font-bold uppercase tracking-wide" for="grid-password">Message</label><textarea class="no-resize mb-3 block h-48 w-full resize-none appearance-none rounded border border-gray-200 py-3 px-4 leading-tight text-gray-700 focus:border-gray-500 focus:bg-white focus:outline-none" id="message"></textarea></div></div><div class="md:flex md:items-center"><div class="md:w-1/3"><button class="ml-2 shrink-0 rounded-full bg-gradient-to-br from-sky-500 to-cyan-400 px-3 py-1 text-sm font-medium text-gray-700 hover:from-sky-700 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-cyan-600/50" type="submit">Send</button></div><div class="md:w-2/3"></div></div></form> <div class="ml-3 max-w-lg bg-slate-300"> <link href="/pagefind/pagefind-ui.css" rel="stylesheet"> <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script> <div id="search" class="ml-3 p-4"></div> <script type="module">window.addEventListener("DOMContentLoaded",e=>{setTimeout(()=>{new PagefindUI({element:"#search"})},2e3)});</script> </div> </div> </div>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2026<!-- --> by <!-- -->FriendlyUsers Tech Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer">FriendlyUser</a>. Last updated on <!-- -->2026-02-26<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div> </body></html>